require(["splunkjs/mvc","app/splunk_app_aws/js/libs/underscore","app/splunk_app_aws/js/libs/backbone","app/splunk_app_aws/js/swc-aws/index","app/splunk_app_aws/js/libs/jquery","splunkjs/mvc/searchmanager","splunkjs/mvc/tokenforwarder","splunkjs/mvc/simplexml/ready!","splunkjs/mvc/tableview","splunkjs/mvc/simplesplunkview","app/splunk_app_aws/js/swc-aws/index_for_visualization","splunkjs/mvc/multidropdownview"],function(e,t,n,i,a,o,s,r,l,c,d,u){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i,a;n.p=function(){function e(){for(var e,n,i="",a=0,o=arguments.length;a<o;a++)e=arguments[a].toString(),n=e.length,n>1&&"/"==e.charAt(n-1)&&(e=e.substring(0,n-1)),i+="/"!=e.charAt(0)?"/"+e:e;if("/"!=i){var s=i.split("/"),r=s[1];if("static"==r||"modules"==r){var l=i.substring(r.length+2,i.length);i="/"+r,window.$C.BUILD_NUMBER&&(i+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(i+="."+window.$C.BUILD_PUSH_NUMBER),"app"==s[2]&&(i+=":"+t("APP_BUILD",0)),i+="/"+l}}var c=t("MRSPARKLE_ROOT_PATH","/"),d=t("DJANGO_ROOT_PATH",""),u=t("LOCALE","en-US"),p="";return p=d&&i.substring(0,d.length)===d?i.replace(d,d+"/"+u.toLowerCase()):"/"+u+i,""==c||"/"==c?p:c+p}function t(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return e("/static/app/splunk_app_aws")+"/"}(),i=[n(4),n(29),n(5),n(2),n(104),n(105),n(106),n(71),n(116),n(48),n(53)],a=function(e,t,n,i,a,o,s,r){function l(){u.startSearch(),p.startSearch()}function c(){u.startSearch()}function d(){h.startSearch()}var u=i.Components.get("jobSearch"),p=i.Components.get("anomalySearch"),h=i.Components.get("scheduleCheckerSearch"),f=new a({jobSearch:u}),A=i.Components.getInstance("lastAnomaliesTable");A.getVisualization(function(e){e.addCellRenderer(new o)}),A.on("click",function(e){e.preventDefault();var t=e.data["row.Job name"],n=f.getJobWithName(t),i=new Date(e.data["row._time"]).getTime()/r.MILLI_SEC_IN_SEC,a=(n[r.JOB_SCHEDULE],i),o=i,s=n[r.JOB_TRAIN],l=parseInt(s.slice(0,-1)),c=s.slice(-1);switch(c){case"s":a-=1.2*l*r.MILLI_SEC_IN_SEC/r.MILLI_SEC_IN_SEC,o+=.2*l*r.MILLI_SEC_IN_SEC/r.MILLI_SEC_IN_SEC;break;case"m":a-=1.2*l*r.MILLI_SEC_IN_MIN/r.MILLI_SEC_IN_SEC,o+=.2*l*r.MILLI_SEC_IN_MIN/r.MILLI_SEC_IN_SEC;break;case"h":a-=1.2*l*r.MILLI_SEC_IN_HOUR/r.MILLI_SEC_IN_SEC,o+=.2*l*r.MILLI_SEC_IN_HOUR/r.MILLI_SEC_IN_SEC;break;default:a-=1.2*l*r.MILLI_SEC_IN_DAY/r.MILLI_SEC_IN_SEC,o+=.2*l*r.MILLI_SEC_IN_DAY/r.MILLI_SEC_IN_SEC}var d=["earliest="+a,"latest="+o,"time="+i,"field="+e.data["row.Field name"],"display.general.type=visualizations","display.page.search.mode=smart","display.page.search.tab=visualizations","display.visualizations.type=custom","display.visualizations.custom.type=splunk_app_aws.anomaly_detection_viz","q="+encodeURIComponent(("|"===n[r.JOB_SEARCH].trimLeft().charAt(0)?"":"search ")+n[r.JOB_SEARCH])],u="search?"+d.join("&");window.open(u)}),new s({managerid:"jobTableSearch",pageSize:"10",el:t("#jobTable"),drilldown:"none",callback:{allUpdate:l,jobUpdate:c,scheduleCheckerUpdate:d},models:{tableModel:f}}).render()}.apply(t,i),!(void 0!==a&&(e.exports=a))},,function(t,n){t.exports=e},,function(e,n){e.exports=t},function(e,t){e.exports=n},,function(e,t){e.exports=i},,,,,,,,,,,,,,,,,function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(i[o]=!0)}for(a=0;a<t.length;a++){var s=t[a];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=h[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(c(i.parts[o],t))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(c(i.parts[o],t));h[i.id]={id:i.id,refs:1,parts:s}}}}function a(e){for(var t=[],n={},i=0;i<e.length;i++){var a=e[i],o=a[0],s=a[1],r=a[2],l=a[3],c={css:s,media:r,sourceMap:l};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function o(e,t){var n=m(),i=b[b.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function r(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function c(e,t){var n,i,a;if(t.singleton){var o=_++;n=g||(g=r(t)),i=d.bind(null,n,o,!1),a=d.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=p.bind(null,n),a=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=r(t),i=u.bind(null,n),a=function(){s(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}function d(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=v(t,a);else{var o=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function u(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var h={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},A=f(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=f(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,_=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=A()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=a(e);return i(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var r=n[s],l=h[r.id];l.refs--,o.push(l)}if(e){var c=a(e);i(c,t)}for(var s=0;s<o.length;s++){var l=o[s];if(0===l.refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete h[l.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},,,,function(e,t){e.exports=a},,,function(e,t,n){var i,a;i=[n(4),n(7),n(33)],a=function(e,t,n){"use strict";var i=t.utils,a=i.getPageInfo().app,o=1e4;return{search:function(t,i,s){i||(i={});var r,l=s?{tokens:!0}:null,c=$.Deferred(),d=new n($.extend({id:e.uniqueId("adhoc"),search:t,preview:!1,app:a,count:o,offset:0},i),l);return d.once("search:done",function(){r=d.data(i.data||"results",{output_mode:"json",count:o}),r.once("data",function(){c.resolve(r.data().results)}),r.once("error",c.reject),r.fetch()}),d.once("search:error search:fail search:cancelled",c.reject),c.always(function(){r&&r.destroy(),d.cancel()}).promise()}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports=o},function(e,t,n){var i,a;i=[n(4),n(7),n(35),n(2),n(37)],a=function(e,t,n,i,a){"use strict";var o=t.utils,s=t.BaseModel,r=t.BaseView,l=t.splunkd_utils,c=o.getPageInfo().app,d=o.getPageInfo().page,u=r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new s({messages:{}}),this.listenTo(this.model,"change",this.render)},events:{"click .hide-messages":"hideMessages"},setMessage:function(t,n,i,a){if("string"==typeof t&&t.length>0){var o=e.clone(this.model.get("messages"));o[t]={body:n,helpLink:i,type:a||"warning"},this.model.set("messages",o)}},unsetMessage:function(t){if("string"==typeof t&&t.length>0){var n=e.clone(this.model.get("messages"));delete n[t],this.model.set("messages",n)}else if("[object Array]"===Object.prototype.toString.call(t)){for(var i=e.clone(this.model.get("messages")),a=0;a<t.length;a++){var o=t[a];delete i[o]}this.model.set("messages",i)}},clearAllMessages:function(t){var n=e.clone(this.model.get("messages"));Object.keys(n).forEach(function(e){n[e].type===t&&delete n[e]}),this.model.set("messages",n)},render:function(){var t=this.model.get("messages"),i=!1;if(Object.keys(t).length>0){var a="";for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];i|="warning"===s.type;var r="";s.helpLink&&(r=n.buildLinkNode(s.helpLink));var l="warning"===s.type?"alert-warning":"info"===s.type?"alert-info":"alert-error",c=e.template(this.template,{warningClassName:l,messageBody:s.body,helpLink:r});a+=c}""!==a&&i&&(a+='<a class="hide-messages">Hide Messages</a>'),this.$el.html(a)}else this.$el.html("");return this},hideMessages:function(){var e=this,t=l.fullpath("saas-aws/splunk_app_aws_warning_message",{app:c,sharing:"app"});$.ajax({url:t+"/"+d+"?output_mode=json",type:"delete",success:function(){e.clearAllMessages("warning")}})},template:'\t            <div class="sourcetype-checker alert <%=warningClassName %>">\t                <i class="icon-alert"></i><%= messageBody %></span> \t                <%= helpLink %> \t            </div> \t        '}),p=$(".dashboard-body .fieldset:eq(0)"),h=$('<div id="message-view"></div>');h.insertAfter(p);var f=new u({el:h});return f}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(36)],a=function(e,t){var n="splunk_app_aws",i="6.0.3",a=encodeURIComponent("["+n+":"+i+"]");return{buildLinkNode:function(e,n){return n=n||t.gettext("Learn more"),"<a class='external' target='_blank' href='/help?location="+a+e+"'>"+n+"</a>"}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){"use strict";function n(){return s.apply(void 0,arguments)}function i(){return s.apply(void 0,arguments)}function a(e){s=e}function o(){a("undefined"!=typeof window&&window.gettext||function(e){return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.gettext=n,t._=i,t.setSharedTranslator=a,t.resetSharedTranslator=o;var s;o()},function(e,t,n){var i;i=function(){return{AWS_RECOMMENDATION_DEPENDENCY:"aws.recommendation.dependency",AWS_DASHBOARD_SOURCETYPECHECKER:"aws.dashboard.sourcetypechecker",AWS_BILLING_TAGS:"aws.billing.tags",AWS_RECOMMENDATION_SECURITYGROUP:"aws.recommendation.securitygroup",AWS_RECOMMENDATION_ELB:"aws.recommendation.elb",AWS_RECOMMENDATION_EC2:"aws.recommendation.ec2",AWS_DASHBOARD_ACCOUNTNAME:"aws.dashboard.accountname",AWS_DASHBOARD_BILLINGDATAMODEL:"aws.dashboard.billingdatamodel",AWS_CUSTOM_INDEX:"aws.dashboard.customindex",AWS_DATA_FORWARDING:"aws.dashboard.dataforwarding",AWS_RI_PLANNER:"aws.dashboard.riplanner",AWS_RECOMMENDATION_EBS:"aws.dashboard.ebs",AWS_ANOMALY_DETECTION:"aws.dashboard.anomalydetection",AWS_BEFORE_UPGRADE:"beforeUpgrade",AWS_AFTER_UPGRADE:"afterUpgrade"}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=[n(2),n(39),n(7)],a=function(e,t,n){"use strict";var i=(n.utils,n.splunkd_utils,/\$PREFIX\$/g),a="detailed_billing",s="instance_hour",r="detailed_billing_cur",l="instance_hour_cur",c='timechart sum(count) as "Instance Hours" span=1d',d='timechart sum(count) as "Instance Hours" span=1d',u='timechart span=1d sum(cost) as "Cost"',p={USD:"$",CNY:"¥",JPY:"¥",EUR:"€"},h=e.Components.getInstance("default"),f=function(e,n,i){if(h.get("disableLocalToken"))return null;h.on("change:"+n,function(t,n){void 0!==("undefined"==typeof n?"undefined":o(n))&&void 0!==n||(n="*"),localStorage.setItem(e,n)});var a=localStorage.getItem(e)||"*";h.set(e,a),new t(["$"+e+"$"],"$"+n+"$",i)};e.setFilter("currency2Symbol",function(e){if(e)return e in p?p[e]:""}),["countspl","costspl"].forEach(function(t){e.setFilter("groupby2"+t,function(e){var n="countspl"===t?c:u,i="countspl"===t?s:a;if(!(e&&e.length>0))return e;switch(e){case"none":return"by _time span=1d | "+n;case"reservation":return"by _time "+s+'.ReservedInstance span=1d | eval Reserved=if(\'instance_hour.ReservedInstance\'="Y", count, 0) | eval count=if(\'instance_hour.ReservedInstance\'="N", count, 0) | fields _time count Reserved | timechart sum(count) as "On-demand" sum(Reserved) as Reserved span=1d';default:return"by _time "+i+"."+e+" span=1d | eval "+i+"."+e+"=if('"+i+"."+e+'\'=="", "No Value", \''+i+"."+e+"') | "+n+" by "+i+"."+e}}),e.setFilter("curgroupby2"+t,function(e){var n="countspl"===t?d:u,i="countspl"===t?l:r;if(!(e&&e.length>0))return e;switch(e){case"none":return"by _time span=1d | "+n;case"reservation":return"by _time "+l+'.ReservedInstance span=1d | eval Reserved=if(\'instance_hour_cur.ReservedInstance\'="Y", count, 0) | eval count=if(\'instance_hour_cur.ReservedInstance\'="N", count, 0) | fields _time count Reserved | timechart sum(count) as "On-demand" sum(Reserved) as Reserved span=1d';default:return"by _time "+i+"."+e+" span=1d | eval "+i+"."+e+"=if('"+i+"."+e+'\'=="", "No Value", \''+i+"."+e+"') | "+n+" by "+i+"."+e}})}),e.setFilter("costbygroups",function(e){if(e&&e.length>0){var t=e.split("|"),n=t.map(function(e){return a+"."+e}).join(" "),i=t.map(function(e){return a+"."+e+" as "+e}).join(", ");return"by "+n+" | rename "+i}return e}),e.setFilter("curcostbygroups",function(e){if(e&&e.length>0){var t=e.split("|"),n=t.map(function(e){return r+"."+e}).join(" "),i=t.map(function(e){return r+"."+e+" as "+e}).join(", ");return"by "+n+" | rename "+i}return e});var A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" OR ";return function(a){if(a&&a.length>0){var o=a.split(n).map(e).join(i);return t(o)}return a}};return e.setFilter("id2InstanceId",A(function(e){return'metric_dimensions="InstanceId=['+e+']"'},function(e){return"("+e+")"})),e.setFilter("id2VolumeId",A(function(e){return'metric_dimensions="VolumeId=['+e+']"'},function(e){return"("+e+")"})),e.setFilter("id2description",A(function(e){return'id="'+e+'"'},function(e){return"("+e+")"})),["tag2description","tag2config"].forEach(function(t){e.setFilter(t,A(function(e){return e.replace(i,"tags.")},function(e){return"|search "+e},"||"," AND "))}),e.setFilter("tag2notification",A(function(e){return e.replace(i,"configurationItem.tags.")},function(e){return"|search "+e},"||"," AND ")),e.setFilter("tag2billing",A(function(e){return e=e.replace(i,"user:"),'"'+e+'"'},function(e){return"|search "+e},"||"," AND ")),e.setFilter("tag2detailed_billing",A(function(e){return e=e.replace(i,"detailed_billing.")},function(e){return e},"||"," AND ")),e.setFilter("tag2detailed_billing_cur",A(function(e){return e=e.replace(i,"detailed_billing_cur.")},function(e){return e},"||"," AND ")),e.setFilter("tag2instance_hour",A(function(e){return e=e.replace(i,"instance_hour.")},function(e){return e},"||"," AND ")),e.setFilter("tag2instance_hour_cur",A(function(e){return e=e.replace(i,"instance_hour_cur.")},function(e){return e},"||"," AND ")),e.setFilter("tag2topology",function(e){if(e&&e.length>0){for(var t=e.split(" OR "),n='| fillnull value="" tags | search ',a=0;a<t.length;a++){var o=t[a].replace(i,""),s=o.split("="),r=s[0],l=s[1],c=!1,d=!1;if("NOT"===r.substr(0,3)?(d=!0,r=r.substr(4)):"*"===l[1]&&"*"===l[l.length-2]&&(c=!0),l=l.substring(1,l.length-1),c)l=l.substring(1,l.length-1),n+='tags="\\S*'+r+",\\S*"+l+'\\S*"';else if(d)n+='tags="^(?!.*'+r+',)"';else{var u=o.split("=");if(o.search("AND")==-1&&(n+='(tags="*'+u[0]+","+u[1].slice(1,u[1].length-1)+'*")'),o.search("AND")!=-1)for(var p=o.split(" AND "),h=0;h<p.length;h++){var f=p[h].split("=");n+='(tags="*'+f[0]+","+f[1].slice(1,f[1].length-1)+'*")',h!=p.length-1&&(n+=" AND ")}}a!=t.length-1&&(n+=" OR ")}return n}return e}),{createLocalStorageToken:f,resetTokenValue:function(e,t,n){h.on("change:"+e,function(){h.set(t,n)})}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports=s},,,,,,,,,function(e,t,n){var i,a;i=[n(4),n(2),n(7),n(49),n(50),n(51),n(61),n(62),n(64),n(65),n(66),n(38),n(52),n(68),n(39),n(59),n(32),n(54),n(69),n(72),n(76),n(53)],a=function(e,t,n,i,a,o,s,r,l,c,d,u,p,h,f,A,m,g,_){"use strict";var b=n.utils,v=n.splunkd_utils;m.search("|inputlookup instance_type",{earliest_time:"-1d"}).then(function(e){0==e.length&&m.search("|checkinstancetype",{earliest_time:"-1d"}).then(function(e){e.length>0&&location.reload()},function(e){console.log(e)})},function(e){console.log(e)}),u.createLocalStorageToken("localAccountId","form.accountId",function(e){return e?e.split(","):f.NO_CHANGE}),u.createLocalStorageToken("localRegions","form.region",function(e){return e?e.split(","):f.NO_CHANGE});var C=t.Components.get("default");h.setRestrictedSearchTermToken();var y=b.getPageInfo().page,E=b.getPageInfo().app,w=t.createService(),B=w.configurations({owner:"nobody",app:"splunk_app_aws"});B.fetch(function(e,t){var n=t.item("app");n.fetch(function(e,t){for(var n=t.properties(),i=0;i<n.entry.length;i++){var a=n.entry[i].name;if("upgrade"==a){var o=n.entry[i].content.status;if("0"==o){var s=new _;s.render_info_view(),s.showUpgradeInfo()}}}})}),i.showWarning();var I=$("#awstags");if(I.length>0){new s({el:I}).render();var O=C.get("tags");O||C.set("tags","")}Object.keys(t.Components.attributes).forEach(function(n){var i=t.Components.get(n);if("undefined"!=typeof i.getVisualizationType){var a=i.getVisualizationType();"table"===a||"statistics"===a?(i.getVisualization(function(e){e.table.addCellRenderer(new r),e.table.render()}),i.getVisualization(function(e){e.table.addCellRenderer(new l),e.table.render()}),i.getVisualization(function(e){e.table.addCellRenderer(new c),e.table.render()})):"single"!==a&&"visualizations:singlevalue"!==a||i.getVisualization(function(t){var n=$("<div></div>").insertAfter(t.$el);new d($.extend(t.settings.toJSON(),{el:n,id:e.uniqueId("single")}))})}}),A.loadContext().done(function(){var e=v.fullpath("saas-aws/splunk_app_aws_warning_message",{app:E,sharing:"app"}),t=function(){new o,a.checkCustomIndex(A.contextData.IS_AWS_ADMIN)};$.get(e+"?output_mode=json").done(function(e){var n=e.entry[0].content.pages;n.indexOf(y)===-1&&t()}).fail(function(){t()})});var S=new g;S.fetch({data:{count:-1}}).done(function(){var e=t.Components.getInstance("submitted");e.set("recommendationEnabled",!0)})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(2),n(7),n(34),n(37)],a=function(e,t,n,i,a){var o=n.utils,s={iam:["ACCELERATION_REPORT"],key_pairs:["ACCELERATION_REPORT"],network_acls:["ACCELERATION_REPORT"],security_groups:["ACCELERATION_REPORT"],security_overview:["ACCELERATION_REPORT"],user_activity:["ACCELERATION_REPORT"],vpcs:["ACCELERATION_REPORT"],RI_planner:["RI_PLANNER_PRICE_INFO"],RI_planner_cur:["RI_PLANNER_PRICE_INFO"]},r={ACCELERATION_REPORT:{source:"report acceleration hint",body:"It may take a long time to return search results in the current panel due to pending report acceleration.",helpLink:null},RI_PLANNER_PRICE_INFO:{source:"riPrice",body:'To keep the prices of EC2 instances up-to-date, use this search command: "| rirecommendation info".',helpLink:null}},l=o.getPageInfo().page;return{showWarning:function(){e.isUndefined(s[l])||s[l].forEach(function(e){var t=r[e];i.setMessage(t.source,t.body,t.helpLink,t.type||"info")})}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(2),n(7),n(33),n(34),n(37)],a=function(e,t,n,i,a,o){var s=n.utils,r={topology:["aws_topology_history","aws_topology_daily_snapshot","aws_topology_monthly_snapshot","aws_topology_playback"],vpc_flow_logs_security:["aws_vpc_flow_logs"],vpc_flow_logs_traffic:["aws_vpc_flow_logs"],insights_overview:["aws_anomaly_detection"],billing_anomaly_detection_insights:["aws_anomaly_detection"],security_anomaly_detection_insights:["aws_anomaly_detection"]},l=t.createService({owner:"nobody",app:s.getCurrentApp()}),c=s.getPageInfo().page;return{checkCustomIndex:function(t){var n=this;e.isUndefined(r[c])||l.request("server/info","GET").done(function(e){var i=JSON.parse(e).entry[0].content,a=i.server_roles,o=i.isForwarding,s=i.host;a.indexOf("search_head")===-1?n._checkOnSingleInstance():o?n._checkOnDistributedEnv(t,s):n._showForwardingWarning()})},_checkOnSingleInstance:function(){var t=this,n=r[c];l.request("data/indexes","GET").done(function(i){var a=e.pluck(JSON.parse(i).entry,"name"),o=e.difference(n,a);o.length>0&&t._showIndexWarning(o)})},_checkOnDistributedEnv:function(t,n){var a=this,o=r[c],s=new i({id:e.uniqueId(),earliest_time:"-6h",latest_time:"now",search:"index="+o[0]+" | head 1"});s.on("search:done",function(s){if(0===s.content.resultCount)if(t){var r=new i({id:e.uniqueId(),earliest_time:"-1h@h",latest_time:"now",search:'index=_internal source=*splunkd.log log_level=WARN component=IndexerService message="*'+n+'*" message="Received event for unconfigured/disabled/deleted index='+o[0]+'*"'});r.on("search:done",function(e){e.content.resultCount>0&&a._showIndexWarning(o)})}else a._showIndexWarning(o)})},_showIndexWarning:function(e){var t="Some panels may not be displayed correctly because you do not have created the following indexes: "+e.join(", ")+", or, data of these indexes have not been generated.";a.setMessage("customIndexChecker",t,o.AWS_CUSTOM_INDEX)},_showForwardingWarning:function(){var e="Some panels may not be displayed correctly. Configure this search head to forward data directly to the indexer layer.";a.setMessage("customIndexChecker",e,o.AWS_DATA_FORWARDING)}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(7),n(52),n(34),n(54),n(58),n(32),n(59),n(37)],a=function(e,t,n,i,a,o,s,r,l){"use strict";var c=t.BaseModel,d=t.BaseView,u=d.extend({initialize:function(){var t=this;d.prototype.initialize.apply(this,arguments),this.model=new c({inputs:[],recommendation:null}),this.instance_type="",s.search("|inputlookup instance_type",{earliest_time:"-1d"}).then(function(e){0!=e.length&&"on-prem"==e[0].value&&(t.instance_type="on-prem")},function(e){console.log("Received an error during verification of Instance type"+e)}),this.cachedSourcetypes=null,this.cachedRecommendation=null,this.messageView=i,this._getInputsOnce=e.once(this._getInputs),this._getRecommendationOnce=e.once(this._getRecommendation),this.listenTo(n,"change:sourcetype",function(e){t._getInputsOnce(),t._verifyInputs(t.cachedSourcetypes,e)}),this.listenTo(n,"change:recommendation",function(e){e&&(t._getRecommendationOnce(),t._verifyRecommendation(t.cachedRecommendation))}),this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.get("inputs"),t=this.model.get("recommendation");if(e&&e.length>0){var n="Some panels may not be displayed correctly because the following inputs have not been configured: "+e.join(", ")+'.<br/>Or, the saved search "Addon Metadata - Summarize AWS Inputs" is not enabled on Add-on instance.';this.messageView.setMessage("sourcetypeChecker",n,l.AWS_DASHBOARD_SOURCETYPECHECKER)}if(t){var i="Some panels in this dashboard may not be displayed correctly. ";t.indexOf("ML lib does not exist")>=0&&"on-prem"==this.instance_type?(i+='The App "Python for Scientific Computing" is not installed or incorrectly configured.',this.messageView.setMessage("recommendation",i,l.AWS_RECOMMENDATION_DEPENDENCY)):t.indexOf("AWS Admin Validation Failed")>=0?(i+="Only AWS admin can visit the insights.",this.messageView.setMessage("recommendation",i,l.AWS_RECOMMENDATION_DEPENDENCY)):t.indexOf("Not supported in Splunk Light")>=0&&(i+="It is not supported in Splunk Light.",this.messageView.setMessage("recommendation",i,l.AWS_RECOMMENDATION_DEPENDENCY))}return this},_getInputs:function(){var t=this;s.search("`aws-input-summary` | dedup input_sourcetype | fields input_sourcetype",{earliest_time:"-1d"}).then(function(n){n&&n.length>0?t.cachedSourcetypes=e.pluck(n,"input_sourcetype").reduce(function(e,t){return e[o.findInputBySourcetype(t)]=!0,e},{}):t.cachedSourcetypes=[]})},_getRecommendation:function(){var e=this,t=new a;t.fetch({data:{count:-1}}).catch(function(t){e.cachedRecommendation=t})},_verifyInputs:function(e,t){if(e){var n=t.map(function(t){return t=o.findInputBySourcetype(t),t in e?null:t}).filter(function(e){return!!e});this.model.set("inputs",n)}},_verifyRecommendation:function(e){e&&e.responseText&&this.model.set("recommendation",e.responseText)}});return u}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(5),n(2),n(33),n(53)],a=function(e,t,n,i){"use strict";function a(){return Object.keys(n.Components.attributes).map(function(e){var t=n.Components.get(e),a=null;return t instanceof i?a=t:t.manager&&t.manager instanceof i&&(a=t.manager),a}).filter(function(e){return null!==e})}function o(e){return e.indexOf("services/saas-aws/splunk_app_aws_recommendation")>-1}function s(){var e=a(),t=!1,n=e.map(function(e){return e.has("data")?e.get("data").eventSearch+e.get("data").reportSearch:null}).filter(function(e){return!!e}).map(function(e){!t&&o(e)&&(t=!0);var n=[],i=e.match(l);i&&(n=i.map(function(e){var t=l.exec(e);return t&&t.length>1?t[1]:null}).filter(function(e){return null!==e}));for(var a in r){var s=new RegExp("\\b"+a+"\\b","g");s.test(e)&&n.push(r[a])}return n}).reduce(function(e,t){return t.forEach(function(t){e[t]=!0}),e},{});t&&d.trigger("change:recommendation",!0),d.trigger("change:sourcetype",Object.keys(n))}var r={aws_topology_daily_snapshot:"aws:config","services/saas-aws/splunk_app_aws_recommendation":"aws:cloudwatch","datamodel=Detailed_Billing":"aws:billing","datamodel=Instance_Hour":"aws:billing","datamodel=Detailed_Billing_CUR":"aws:billing:cur","datamodel=Instance_Hour_CUR":"aws:billing:cur","datamodel S3_Access_Log":"aws:s3:accesslogs","datamodel CloudFront_Access_Log":"aws:cloudfront:accesslogs"},l=/sourcetype\s*=[\s'"]*(aws:.+?)[\s'"]{1}/g,c=4e3,d=e.extend(t.Events);return setInterval(s,c),d}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports=r},function(e,t,n){var i,a;i=[n(55),n(56)],a=function(e,t){return e.extend({url:"saas-aws/splunk_app_aws_recommendation",model:t,initialize:function(){e.prototype.initialize.apply(this,arguments)}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(7)],a=function(e){var t=e.SplunkDsBaseCollection;return t.extend({fetch:function(){var e=this,n=t.prototype.fetch.apply(this,arguments);return n.done(function(){e._fetched=!0}),n},isFetched:function(){return this._fetched===!0}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(57)],a=function(e,t){return t.extend({url:"saas-aws/splunk_app_aws_recommendation",urlRoot:"saas-aws/splunk_app_aws_recommendation",initialize:function(){t.prototype.initialize.apply(this,arguments)},getAttributeNames:function(){return["status","action","resourceId"]},parse:function(e){return e.entry[0].content}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(5),n(7)],a=function(e,t,n){var i=n.SplunkDBase,a=n.splunkd_utils,o=function(t,n){var i=e.isFunction(t.url)?t.url():t.url;t.id&&(i=t.id);var o={};return n.data&&(o=$.extend(o,{app:n.data.app||void 0,owner:n.data.owner||void 0,sharing:n.data.sharing||void 0})),i=a.fullpath(i,o),i+="?output_mode="+encodeURIComponent("json"),n.data&&n.data.target&&(i+="&target="+encodeURIComponent(n.data.target)),n.data&&n.data.aws_service&&(i+="&aws_service="+encodeURIComponent(n.data.aws_service)),i},s=function(e){delete e.data.app,delete e.data.owner,delete e.data.sharing,delete e.data.output_mode,delete e.data.target,delete e.data.aws_service,delete e.data.count},r=function(e,n){var i,r=$.Deferred(),l={data:{}};return l.url=o(e,n),l.processData=!0,$.extend(!0,l.data,e.includeListAttributes()),$.extend(!0,l,n),s(l),l.data=a.normalizeValuesForPOST(l.data),i=t.sync.call(null,"create",e,l),i.done(function(){r.resolve.apply(r,arguments)}),i.fail(function(){r.reject.apply(r,arguments)}),r.promise()},l=function(e,n){var i,r=$.Deferred(),l={data:{}};l.url=o(e,n),l.processData=!0;var c=$.extend(!0,{},n);return $.extend(!0,l.data,e.includeListAttributes(c)),$.extend(!0,l,n),s(l),l.processData=!0,l.type="POST",l.data=a.normalizeValuesForPOST(l.data),i=t.sync.call(null,"update",e,l),i.done(function(){r.resolve.apply(r,arguments)}),i.fail(function(){r.reject.apply(r,arguments)}),r.promise()},c=function(e,n){var i,r=$.Deferred(),l={data:{}};l.url=o(e,n),$.extend(!0,l.data,n.attrs&&e.includeListPassedInAttributes(n.attrs)||{}),delete n.attrs,$.extend(!0,l,n),s(l),l.processData=!0,l.type="POST",l.url=url,l.data=a.normalizeValuesForPOST(l.data),i=t.sync.call(null,"update",e,l),i.done(function(){r.resolve.apply(r,arguments)}),i.fail(function(){r.reject.apply(r,arguments)})},d=function(e,n){var i,a=$.Deferred(),r={data:{}};return r.url=o(e,n),$.extend(!0,r,n),s(r),r.processData=!0,i=t.sync.call(this,"delete",e,r),i.done(function(){a.resolve.apply(a,arguments)}),i.fail(function(){a.reject.apply(a,arguments)}),a.promise()};return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments)},getAttributeNames:function(){return[]},sync:function(e,t,n){switch(e){case"create":return r.call(this,t,n);case"update":return l.call(this,t,n);case"patch":return c.call(this,t,n);case"delete":return d.call(this,t,n);default:return i.prototype.sync.apply(this,arguments)}},includeListAttributes:function(t){var n=this.getAttributeNames(),i=this.splunkDWhiteList.get("wildcard")||[],a=this.entry.content.filterByKeys(n,{allowEmpty:!0},t);return e.extend(a,this.entry.content.filterByWildcards(i,{allowEmpty:!0},t))},fetch:function(){var e=this,t=i.prototype.fetch.apply(this,arguments);return t.done(function(){e._fetched=!0}),t},isFetched:function(){return this._fetched===!0}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[],a=function(){"use strict";var e={"aws:cloudtrail":"CloudTrail","aws:config":"Config","aws:config:notification":"Config","aws:billing":"Billing (Legacy)","aws:billing:cur":"Billing (Cost and Usage Report)","aws:inspector":"Inspector","aws:config:rule":"Config Rule","aws:cloudwatch":"CloudWatch","aws:cloudfront:accesslogs":"CloudFront Access Logs","aws:elb:accesslogs":"ELB Access Logs","aws:s3:accesslogs":"S3 Access Logs","aws:description":"Description","aws:cloudwatchlogs:vpcflow":"VPC Flow Logs"};return{findInputBySourcetype:function(t){return e[t]}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(60)],a=function(e,t){var n={APP:"splunk_app_aws",OWNER:"nobody",ROLES:[],CAPABILITIES:[],IS_ADMIN:!1,IS_AWS_ADMIN:!1},i={config:"AWS Config","config-rule":"Config Rules",cloudwatch:"CloudWatch",cloudtrail:"CloudTrail",billing:"Billing",s3:"S3","cloudwatch-logs":"CloudWatch Logs",kinesis:"Kinesis",inspector:"Inspector",description:"Metadata"},a=$.Deferred();return{contextData:n,loadContext:function(){var e=this;return t.getContext(function(t){e.contextData=$.extend({},n,{APP:t.app,OWNER:t.owner,ROLES:t.roles,CAPABILITIES:t.capabilities,SERVICE_READABLE_NAMES:i,IS_ADMIN:t.is_admin,IS_AWS_ADMIN:t.is_aws_admin}),a.resolve()}),a}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(29),n(4),n(7)],a=function(e,t,n){var i=n.utils,a=n.splunkd_utils,o=e.Deferred(),s=i.getPageInfo().app,r=a.fullpath("saas-aws/splunk_app_aws_current_context",{app:s,sharing:"app"});return e.get(r+"?output_mode=json").done(function(e){var t=e.entry[0].content.roles,n=e.entry[0].content.capabilities,i=e.entry[0].content.is_admin;is_aws_admin=e.entry[0].content.is_aws_admin,o.resolve({app:s,roles:t,capabilities:n,
is_admin:i,is_aws_admin:is_aws_admin})}).fail(function(){o.reject()}),{getContext:function(e,t){o.done(e),o.fail(t)}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(29),n(4),n(2),n(7),n(58),n(32),n(52)],a=function(e,t,n,i,a,o,s){"use strict";function r(e,t){return{id:e,text:e,stage:t}}var l=i.BaseView,c="STAGE_KEY",d="STAGE_OPERATOR",u="STAGE_VALUE",p="STAGE_RELATION",h={Config:"| inputlookup tags_config append=t",Description:"| inputlookup tags_description append=t","Billing (Legacy)":"| `aws-billing-datamodel-tags`","Billing (Cost and Usage Report)":"| `aws-billing-datamodel-tags-cur`"},f="$PREFIX$",A=/(.*?)!?=(.*?)\s+(AND|and|OR|or)\s+/g,m=/(.*?)\s+(AND|and|OR|or)\s+/g,g=/(['"])?(.*?)\1(!?=)(.*)/,_=/(["']?)([^\1]*)(\1)(.*)/,b=n.Components.getInstance("default"),v=n.Components.getInstance("submitted"),C=[],y=null,E=["=","!="].map(function(e){return r(e,d)}),w=["AND","OR"].map(function(e){return r(e,p)}),B=l.extend({events:{"keydown input":"onKeydown","input input":"onInput","focus input":"onFocus","mouseleave .tag-autocomplete":"_hideAutocomplete","blur input":"_hideAutocomplete","click ul > li":"_onSelecting"},_loadingTemplate:t.template('<li class="tag-loading">\n                <span class="loading-img"></span>\n                <span style="font-weight: bold;">Loading</span>\n            </li>'),_onSelecting:function(t){var n=this._currentStatus,i=e(t.currentTarget).data("stage"),a=this.$("input").val();switch(i){case c:a=a.replace(new RegExp(n.key+"$"),e(t.currentTarget).text());break;case d:a+=e(t.currentTarget).text();break;case u:var o=a.lastIndexOf("=");a=a.substring(0,o+1),a+='"'+e(t.currentTarget).text()+'"';break;case p:a=a.replace(new RegExp(n.rel+"$")," "+e(t.currentTarget).text()+" ")}this.$("input").val(a).focus(),this.onInput(),i===c&&this.$(".tag-autocomplete").hide()},onKeydown:function(e){if(38===e.keyCode||40===e.keyCode){var t=this.$(".tag-autocomplete").height(),n=this.$(".tag-autocomplete").scrollTop();if(0===this.$(".tag-autocomplete > ul > li").length)return;var i=this.$(".tag-autocomplete > ul > li.active"),a=null;if(a=40===e.keyCode?0===i.length?this.$(".tag-autocomplete > ul > li").first():i.next():0===i.length?this.$(".tag-autocomplete > ul > li").last():i.prev(),i.removeClass("active"),0===a.length)return;a.addClass("active");var o=a.position().top,s=a.height(),r=o+s-t;o<0?this.$(".tag-autocomplete").scrollTop(n+o):r>0&&this.$(".tag-autocomplete").scrollTop(n+r+1),e.preventDefault()}else if(13===e.keyCode){var l=this.$(".tag-autocomplete > ul > li.active");if(0!==l.length&&this.$(".tag-autocomplete").is(":visible"))l.trigger("click");else{var c=this.$("input").val(),d="";if(""!==c.trim()){for(var u=void 0;null!==(u=m.exec(c));){var p=this._processTerm(u[1]);d+=p+" "+u[2]+" "}d+=this._processTerm(c.replace(m,""))}b.set("tags",d),b&&v&&v.set(b.toJSON())}}},_processTerm:function(e){var t=g.exec(e);return 5===t.length?(t[2]=f+t[2],t[1]||(t[1]=""),""+t[1]+t[2]+t[1]+t[3]+t[4]):""},onInput:function(){var e=this.$("input").val().replace(A,""),t=this._detectStatus(e);this._handleStatus(t),this._currentStatus=t},onFocus:function(){this._cachedKeys?this.onInput():this._fetchKeys(status.key)},_hideAutocomplete:function(){var e=this;t.delay(function(){e.$("input").is(":focus")||e.$(".tag-autocomplete").hide()},200)},_handleStatus:function(e){var t=[];switch(e.stage){case c:this._cachedKeys?(t=this._filterTokens(this._cachedKeys,e.key),this._showAutoComplete(t)):this._fetchKeys(e.key);break;case d:t=E,this._showAutoComplete(t);break;case u:this._cachedKey!==e.key?this._fetchValues(e.key,e.value):(t=this._filterTokens(this._cachedValues,e.value),this._showAutoComplete(t));break;case p:t=w,this._showAutoComplete(t)}},_showAutoComplete:function(e){var n=e.map(function(e){var n=t.escape(e.text),i=t.escape(e.stage);return'<li data-stage="'+i+'">'+n+"</li>"}).join("");this.$(".tag-autocomplete > ul").html(n),this.$(".tag-autocomplete").show()},_showLoading:function(){this.$(".tag-autocomplete > ul").html(this._loadingTemplate()),this.$(".tag-autocomplete").show()},_fetchKeys:function(e){var t=this;this._showLoading(),o.search(y+" | stats count by key | fields - count").then(function(n){t._cachedKeys=n.map(function(e){return r(e.key,c)}),0===t._cachedKeys.length&&(t._cachedKeys=null);var i=t._filterTokens(t._cachedKeys,e);t._showAutoComplete(i)},function(e){console.log(e)})},_fetchValues:function(e,t){var n=this,i="",a="`aws-billing-cur-tag-value("+e+")`",s="`aws-billing-tag-value("+e+")`";i=y.indexOf("`aws-billing-datamodel-tags`")>-1?y+" | search key=CASE("+e+") | "+s+" | search value=* | fields value":y.indexOf("`aws-billing-datamodel-tags-cur`")>-1?y+" | search key=CASE("+e+") | "+a+" | search value=* | fields value":y+" | search key=CASE("+e+") | dedup value | fields value",this._showLoading(),this._cachedKey=e,o.search(i).then(function(e){n._cachedValues=e.map(function(e){return r(e.value,u)});var i=n._filterTokens(n._cachedValues,t);n._showAutoComplete(i)},function(e){console.log(e)})},_filterTokens:function(e,t){if(!e)return[];var n=e;return t&&(n=e.filter(function(e){return e.text.toUpperCase().indexOf(t.toUpperCase())>-1&&e.text!==t})),n},_detectStatus:function(e){var t={key:null,op:null,value:null,rel:null,stage:null};e.indexOf("!=")>-1?t.op="!=":e.indexOf("=")>-1&&(t.op="=");var n=e.split(t.op);if(t.key=n[0],n.length>1){var i=n[1],a=i.match(_);a&&5===a.length?(t.value=a[2],t.rel=a[4]):t.value=i}return t.stage=this._getStage(t),t},_getStage:function(e){return e.rel?p:e.value||e.op?u:c},initialize:function(){var e=this;this._reset(),this.onInput=t.debounce(this.onInput,50),this.listenTo(s,"change:sourcetype",function(n){var i=n.map(function(e){return a.findInputBySourcetype(e)}).filter(function(e){return!!e});t.isEqual(i,C)||(C=i,y=e._generateSPL(b.get("form.accountId")||"*",i),e.$el.find("input").attr("placeholder","key=value AND|OR key2=value2").prop("disabled",!1))}),b.on("change:accountId",this._reset.bind(this))},render:function(){var e=b.get("tags");e=e?'value="'+e.replace(/\$PREFIX\$/g,"").replace(/\"/g,"&quot;")+'"':"",this.$el.html('\n                <label>Tags</label>\n                <input type="text" placeholder="loading..." disabled '+e+' />\n                <div class="tag-autocomplete"><ul></ul></div>\n            '),this.$el.show()},_reset:function(){this._cachedKeys=null,this._cachedKey=null,this._cachedValues=null,this._currentStage=c,this._currentStatus=null},_generateSPL:function(e,t){var n=t.filter(function(e){return e in h}).map(function(t){var n=h[t];return["Description","Config"].indexOf(t)>-1&&(n+="*"===e?"":" where aws_account_id="+e),n}).sort(function(e,t){return e.indexOf("`aws-billing-datamodel-tags`")>-1?-1:e.indexOf("`aws-billing-datamodel-tags-cur`")>-1?-1:t.indexOf("`aws-billing-datamodel-tags`")>-1?1:t.indexOf("`aws-billing-datamodel-tags-cur`")>-1?1:0}).join(" ");return n}});return B}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(2),n(63),n(53)],a=function(e,t,n){"use strict";var i=["Percentage"],a=n.BaseCellRenderer.extend({initialize:function(e){this.fields=i,n.BaseCellRenderer.prototype.initialize.apply(this,arguments)},canRender:function(e){return this.fields.indexOf(e.field)>-1},render:function(t,n){var i=Math.min(Math.max(parseFloat(n.value),0),100);return isNaN(i)?void t.html("N/A"):void t.addClass("data-bar-cell").html(e.template(this.template,{percent:i,cellValue:String(n.value)}))},template:'\t            <div class="data-bar-wrapper">\t                <div class="data-bar" style="width:<%- percent %>%">\t                    <div class="data-bar-custom-text">\t                        <span class="data-bar-badge"><%- cellValue %></span>\t                    </div>\t                </div>\t            </div>\t        '});return a}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports=l},function(e,t,n){var i,a;i=[n(4),n(2),n(7),n(63),n(32),n(29),n(53)],a=function(e,t,n,i,a){"use strict";var o=(n.utils,["Event Name"]),s=i.BaseCellRenderer.extend({initialize:function(t){var n=this;this.valueMap=null,this.search=a.search("| inputlookup all_eventName").then(function(t){var i={};e(t).each(function(e){i[e.eventName]=e.highlight}),n.valueMap=i}),this.fields=o,i.BaseCellRenderer.prototype.initialize.apply(this,arguments)},canRender:function(e){return this.fields.indexOf(e.field)>-1},render:function(e,t){var n=this;return $.when(this.search).done(function(){e.text(t.value);var i=n.valueMap[t.value];null!==i&&e.addClass("range-"+i)}),this}});return s}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(2),n(63),n(53)],a=function(e,t,n){var i={CREATE:["range-cell","range-low"],UPDATE:["range-cell","range-elevated"],DELETE:["range-cell","range-severe"],Unauthorized:["range-cell","range-unauth","numeric"],Authorized:["range-cell","range-auth","numeric"],"Error Code":["range-cell","range-err"]},a={Direction:{ingress:["range-cell","inbound"],egress:["range-cell","outbound"]},"Instance State":{"in service":["range-cell","range-low"],"out of service":["range-cell","range-severe"],healthy:["range-cell","range-low"],unused:["range-cell","range-severe"],unhealthy:["range-cell","range-severe"],draining:["range-cell","range-severe"]}},o=Object.keys(i).concat(Object.keys(a)),s=n.BaseCellRenderer.extend({canRender:function(e){return o.indexOf(e.field)>-1},render:function(e,t){var n=t.field,o=t.value;if(n in i&&i[n].forEach(function(t){e.addClass(t)}),n in a){var s=a[n];o in s&&s[o].forEach(function(t){e.addClass(t)})}e.text(o)}});return s}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(2),n(67),n(53)],a=function(e,t,n){"use strict";var i="_total_field",a="_total_name",o="_total_prefix",s=n.extend({outputMode:"json",returnCount:2,options:{},displayMessage:function(){},createView:function(){return!0},updateView:function(t,n){var s=0,r="events",l="out of",c="",n=n[0];this.$el.empty(),e.isUndefined(n[i])?c="display: none":s=n[i],e.isUndefined(n[a])||(r=n[a]),e.isUndefined(n[o])||(l=n[o]);var d=e.template(this.template,{prefix:l,total:s,name:r,hide:c});this.$el.html(d)},template:'\t            <div class="single-total" style="<%- hide %>" title="Total value: <%- total %>">\t                <%- prefix %> <b><%- total %></b> <%- name %>\t            </div>\t        '});return s}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports=c},function(e,t,n){var i,a;i=[n(4),n(2),n(7),n(53)],a=function(e,t,n){var i=n.utils,a=n.splunkd_utils,o=i.getPageInfo().app,s=i.getPageInfo().page,r={cloudfront_access_logs:{prefix:"CloudFront_Access_Log.",field:"account_id",token:"cloudfront_datamodel_restrictions"},s3_access_logs:{prefix:"S3_Access_Log.",field:"account_id",token:"s3_datamodel_restrictions"}},l=t.Components.getInstance("submitted");return{setRestrictedSearchTermToken:function(){var e=r[s];if(e){var t=a.fullpath("saas-aws/splunk_app_aws_search_restrictions",{app:o,sharing:"app"});$.ajax({url:t+"?output_mode=json&field="+e.field+"&prefix="+e.prefix,type:"get",success:function(t){var n=t.entry[0].content.search_restrictions;l.set(e.token,n)}})}}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(2),n(70),n(35),n(37),n(71)],a=function(e,t,n,i,a,o){var s=n.Modal,r='<a href="#" class="btn cancel-job pull-left">Cancel</a>',l='<a href="#" class="btn btn-primary ack-info pull-left">Acknowledge</a>',c='<a href="#" class="btn btn-primary modal-btn-primary pull-right">OK</a>',d='<a href="#" class="btn create-job pull-right">Create</a>',u=["create-alert","edit-alert","delete-alert","create-job","edit-job","delete-job","change-job-mode"];return s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments)},events:$.extend({},s.prototype.events,{"click .cancel-job":function(e){e.preventDefault(),this.hide()},"click .ack-info":function(e){e.preventDefault();var n=t.createService(),i=n.configurations({owner:"nobody",app:"splunk_app_aws"});i.fetch(function(e,t){var n=t.item("app");n.fetch(function(e,n){for(var i=n.properties(),a=0;a<i.entry.length;a++){var o=i.entry[a].name;"upgrade"==o&&t.post("app/upgrade",{status:1})}})}),this.hide()},"click a.create-alert":function(e){e.preventDefault(),this.hide(),this.trigger("createAlert",this.name)},"click a.edit-alert":function(e){e.preventDefault(),this.hide(),this.trigger("editAlert")},"click a.delete-alert":function(e){e.preventDefault(),this.hide(),this.trigger("deleteAlert",this.id,this.alert,!0)},"click a.delete-job":function(e){e.preventDefault(),this.hide(),this.trigger("deleteJob",this.id,this.alert)},"click a.edit-job":function(e){e.preventDefault(),this.hide(),this.trigger("editJob",this.name)},"click .create-job":function(e){e.preventDefault(),this.hide(),this.trigger("createJob")},"click .change-job-mode":function(e){e.preventDefault(),this.hide(),this.trigger("changeJobMode",this.id,this.mode)}}),render:function(){return this.$el.html(s.TEMPLATE),this.$(s.FOOTER_SELECTOR).append(r),this.$(s.FOOTER_SELECTOR).append(c),this.$(s.FOOTER_SELECTOR).append(d),this.$(".create-job").hide(),this},render_info_view:function(){return this.$el.html(s.TEMPLATE),this.$(s.FOOTER_SELECTOR).append(l).css("display","block"),this.$(".create-job").hide(),this},showFail:function(e,t){this._clean(),this.$(s.HEADER_TITLE_SELECTOR).html("Fail to "+t),this.$(".btn-primary").html("OK"),this.$(s.BODY_SELECTOR).html("Operations on "+e+" has been failed. Please try again."),this.show()},showAlertLoadFail:function(e){this._clean(),this.$(s.HEADER_TITLE_SELECTOR).html("Fail to load"),this.$(".btn-primary").html("Create"),this.$(".btn-primary").addClass("create-alert"),this.$(s.BODY_SELECTOR).html('Fail to load "'+e+"\" associate alert.<br>This is because alert's permission or accident deletion.\t            <br>Do you want to create another alert associate with current job ?"),this.name=e,this.show()},showJobSaveSuccess:function(e,t){this._clean();var n=(e&o.EDIT_MODE)>0?"updated":"saved",i=(t&o.EDIT_MODE)>0?"Edit Alert":"Create Alert";this.$(s.HEADER_TITLE_SELECTOR).html("Job has been "+n),this.$(".btn-primary").html(i);var a="";(t&o.EDIT_MODE)>0?(this.$(".btn-primary").addClass("edit-alert"),a+="You can continue to edit the binding alert.<br>"):(this.$(".btn-primary").addClass("create-alert"),a+="You can continue to create an alert associated with the job.<br>"),a+='If you want to receive customized email, please select action "Send email".',this.$(s.BODY_SELECTOR).html(a),this.show()},showJobDeleteConfirm:function(t,n,i){this._clean(),this.$(s.HEADER_TITLE_SELECTOR).html("Delete job"),this.$(".btn-primary").html("Delete"),this.$(".btn-primary").addClass("delete-job");var a="Are you sure you want to delete job ("+n+")";e.isEmpty(i)||(a+=" and corresponding alert ("+i.entry.get("name")+")"),a+=" ?",this.$(s.BODY_SELECTOR).html(a),this.id=t,this.alert=i,this.show()},showAlertDeleteConfirm:function(t,n,i){this._clean(),e.isEmpty(i)?this.showAlertLoadFail(n):(this.$(s.HEADER_TITLE_SELECTOR).html("Delete alert"),this.$(".btn-primary").html("Delete"),this.$(".btn-primary").addClass("delete-alert"),this.$(s.BODY_SELECTOR).html("Are you sure you want to delete alert ("+i.entry.get("name")+")?"),this.id=t,this.alert=i),this.show()},showJobModeChangeConfirm:function(e,t,n,i){this._clean(),this.$(s.HEADER_TITLE_SELECTOR).html(e+" job"),this.$(".btn-primary").html(e),this.$(".btn-primary").addClass("change-job-mode"),this.$(s.BODY_SELECTOR).html("Are you sure you want to "+e.toLowerCase()+" job("+n+") ?"),this.id=t,this.mode=i,this.show()},showJobEditConfirm:function(e){this._clean(),this.$(s.HEADER_TITLE_SELECTOR).html("Edit job"),this.$(".btn-primary").html("Edit"),this.$(".btn-primary").addClass("edit-job"),this.$(s.BODY_SELECTOR).html("Another job ("+e+") has been saved with same search. <br>Do you want to edit this job?"),this.name=e,this.show()},showUpgradeInfo:function(){this._clean(),this.$(s.HEADER_TITLE_SELECTOR).html("Information");var e=i.buildLinkNode(a.AWS_BEFORE_UPGRADE),t=i.buildLinkNode(a.AWS_AFTER_UPGRADE);this.$(s.BODY_SELECTOR).html("You installed the Splunk App for AWS version 6.0.3<br><br> Confirm you migrated the indexes for the app and disabled the required saved searches. "+e+"<br><br>Now, enable data model acceleration, schedule reports, and update the aws-data-model-acceleration search macro. "+t),this.show()},_clean:function(){this.$(".btn-primary").removeClass(u.join(" ")),this.$(".create-job").hide()}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports=d},function(e,t,n){var i,a;i=[],a=function(){return{MILLI_SEC_IN_SEC:1e3,MILLI_SEC_IN_MIN:6e4,MILLI_SEC_IN_HOUR:36e5,MILLI_SEC_IN_DAY:864e5,DAY_IN_WEEK:7,DAY_IN_MONTH:30,OUTLIER_COLOR:"#ff0000",NORMAL_COLORS:["#d6563c","#1e93c6","#f2b827","#6a5c9e","#31a35f","#3863a0","#a2cc3e","#ed8440","#cc5068","#73427f","#11a88b","#99712b","#314d5b"],ENABLE_MODE:1,DETECT_MODE:2,DISPLAY_MODE:4,HIGHLIGHT_MODE:8,CREATE_MODE:16,EDIT_MODE:32,INDEX:"summary",SOURCE_TYPE:"aws:anomaly",JOB_ID:"job_id",JOB_NAME:"job_name",JOB_PRIORITY:"job_priority",JOB_MODE:"job_mode",JOB_SCHEDULE:"job_schedule",JOB_SEARCH:"job_search",JOB_TRAIN:"job_train",JOB_TAGS:"job_tags",JOB_ALERT_ID:"job_alert_id",JOB_DESCRIPTION:"job_description",INVALID_SEVERITY_COLOR:"#333",SEVERITY_COLOR_MAP:{1:"#FCE9E5",2:"#fed1c8",3:"#fa8e81",4:"#F14E3B"},UPDATE_SCHEDULE_CHECKER_JOB_SPL:'| inputlookup anomaly_schedule_checker | where job_id!="<%= jobId %>" | outputlookup anomaly_schedule_checker',UPDATE_SCHEDULE_CHECKER_ALERT_SPL:'| inputlookup anomaly_schedule_checker | where job_id!="<%= jobId %>" OR is_alert!="1" | outputlookup anomaly_schedule_checker',DAILY_TIME_FORMAT:"YYYY-MM-DD",HOURLY_TIME_FORMAT:"YYYY-MM-DD HH:mm:ss"}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(2),n(7),n(73),n(75)],a=function(e,t,n,i,a){"use strict";var o=(n.MultiSelectView,a.list_of_ids_with_all),s=a.list_of_ids_without_all;Object.keys(t.Components.attributes).forEach(function(e){for(var n=t.Components.get(e),a=e,r=0;r<o.length;r++)a.search(o[r])!=-1&&(n.val=i.multiSelectVal_persist_all);for(var l=0;l<s.length;l++)a.search(s[l])!=-1&&(n.val=i.multiSelectVal)})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(74)],a=function(e,t){return{multiSelectVal:function(){var n=arguments[0];if(e.isArray(n)&&n.length>1){var i=n.indexOf("*");0===i?n=e.without(n,"*"):i===n.length-1&&(n=["*"]),arguments[0]=n}return t.prototype.val.apply(this,arguments)},multiSelectVal_persist_all:function(){var n=arguments[0];if(e.isArray(n)&&0==n.length&&(arguments[0]="*"),e.isArray(n)&&n.length>1){var i=n.indexOf("*");0===i?n=e.without(n,"*"):i===n.length-1&&(n=["*"]),arguments[0]=n}return t.prototype.val.apply(this,arguments)}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["ip1","ip2","ip3","region","account"],i=["input1_all","input2_all","recommendation_filter","select_severity"];t.list_of_ids_without_all=n,t.list_of_ids_with_all=i},function(e,t,n){var i=n(77);"string"==typeof i&&(i=[[e.id,i,""]]);n(25)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(24)(),t.push([e.id,".single-total{position:relative;text-align:center;font-size:.8vw;font-weight:200!important;line-height:.8vw;color:grey;font-family:Roboto,Droid,Helvetica Neue,Helvetica,Arial,sans-serif}td.data-bar-cell{padding:1px 8px!important}.data-bar-wrapper{background-color:#eee;box-shadow:inset 0 1px 2px rgba(0,0,0,.1);margin-bottom:4px}td.data-bar-cell .data-bar-wrapper .data-bar{min-width:1px;color:#31708f;background-color:#428bca;box-shadow:inset 0 -1px 0 rgba(0,0,0,.3);border-right:1px solid #bb401f}.data-bar-custom-text{margin-right:2px;margin-top:3px;padding-top:2px;padding-bottom:2px;text-align:right}.data-bar-badge{background-color:#fff;border:1px solid #d3d3d3;border-radius:2px;color:purple;opacity:.88;padding-left:2px;padding-right:2px}td.range-low{background-color:#dff0d8!important;color:#3c763d!important;font-weight:700}td.range-elevated{background-color:#fcf8e3!important;color:#8a6d3b!important;font-weight:700}td.range-severe{background-color:#f2dede!important;color:#a94442!important;font-weight:700}td.range-unauth{font-weight:700;color:#d9534f!important}td.range-auth{font-weight:700;color:#428bca!important}td.range-err{font-weight:700;color:orange!important}td.inbound{background-color:#d9edf7!important;border-color:#bce8f1!important;color:#31708f!important}td.inbound,td.outbound{font-weight:700!important}td.outbound{background-color:#f5e0ec!important;border-color:#bda8b3!important;color:#7e6974!important}#awstags{display:inline-block;margin-right:10px}.tag-autocomplete{position:absolute;z-index:999;border:1px solid rgba(82,168,236,.8);background-color:#fff;margin-top:-9px;width:218px;max-height:200px;overflow-y:auto;display:none}.tag-autocomplete>ul{list-style-type:none;margin:0}.tag-autocomplete>ul>li{border-top:1px dotted #ccc;color:#1e93c6;padding-left:5px;line-height:23px;cursor:pointer}.tag-autocomplete>ul>li.active,.tag-autocomplete>ul>li:hover{background-color:rgba(0,0,0,.05)}.tag-autocomplete>ul>li.tag-loading{cursor:default;color:#000}.tag-autocomplete>ul>li.tag-loading>.loading-img{width:16px;height:16px;margin-top:2px;margin-right:5px;display:block;float:left;background-image:url("+n(78)+")}.hide-messages{margin-left:30px;margin-bottom:10px;display:inline-block}.sourcetype-checker{margin-bottom:0}.slidenavList.scroll-group{max-height:350px!important}","",{version:3,sources:["/./package/appserver/static/pcss/dashboards/SingleValueRenderer.pcss","/./package/appserver/static/pcss/dashboards/TableBarRenderer.pcss","/./package/appserver/static/pcss/dashboards/TableCellRenderer.pcss","/./package/appserver/static/pcss/dashboards/TagInputView.pcss","/./package/appserver/static/pcss/dashboards/MessageView.pcss","/./package/appserver/static/pcss/dashboards/common.pcss"],names:[],mappings:"AAAA,cACI,kBAAmB,AACnB,kBAAmB,AACnB,eAAiB,AACjB,0BAA4B,AAC5B,iBAAmB,AACnB,WAAY,AACZ,kEAA0E,CAC7E,ACRD,iBACI,yBAA4B,CAC/B,AAED,kBACI,sBAA0B,AAC1B,0CAA+C,AAC/C,iBAAmB,CACtB,AAED,6CACI,cAAe,AACf,cAAe,AACf,yBAA0B,AAC1B,yCAA+C,AAC/C,8BAAgC,CACnC,AAED,sBACI,iBAAkB,AAClB,eAAgB,AAChB,gBAAiB,AACjB,mBAAoB,AACpB,gBAAkB,CACrB,AAED,gBACI,sBAAuB,AACvB,yBAA0B,AAC1B,kBAAmB,AACnB,aAAe,AACf,YAAc,AACd,iBAAkB,AAClB,iBAAmB,CACtB,AChCD,aACI,mCAAqC,AACrC,wBAA0B,AAC1B,eAAkB,CACrB,AAED,kBACI,mCAAqC,AACrC,wBAA0B,AAC1B,eAAkB,CACrB,AAED,gBACI,mCAAqC,AACrC,wBAA0B,AAC1B,eAAkB,CACrB,AAED,gBACI,gBAAkB,AAClB,uBAA0B,CAC7B,AAED,cACI,gBAAkB,AAClB,uBAA0B,CAC7B,AAED,aACI,gBAAkB,AAClB,sBAAyB,CAC5B,AAED,WACI,mCAAqC,AACrC,+BAAiC,AACjC,uBAA0B,CAE7B,AAED,uBAHI,yBAA6B,CAQhC,AALD,YACI,mCAAqC,AACrC,+BAAiC,AACjC,uBAA0B,CAE7B,AC/CD,SACI,qBAAsB,AACtB,iBAAmB,CACtB,AAED,kBACI,kBAAmB,AACnB,YAAa,AACb,qCAA0C,AAC1C,sBAAwB,AACxB,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,gBAAiB,AACjB,YAAc,CAuCjB,AAnCG,qBACI,qBAAsB,AACtB,QAAU,CAgCb,AA9BG,wBACI,2BAA4B,AAC5B,cAAe,AACf,iBAAkB,AAClB,iBAAkB,AAClB,cAAgB,CAwBnB,AAlBG,6DACI,gCAAsC,CACzC,AAED,oCACI,eAAgB,AAChB,UAAa,CAWhB,AATG,iDACI,WAAY,AACZ,YAAa,AACb,eAAgB,AAChB,iBAAkB,AAClB,cAAe,AACf,WAAY,AACZ,8CAAkD,CACrD,ACjDjB,eACI,iBAAkB,AAClB,mBAAoB,AACpB,oBAAsB,CACzB,AAED,oBACI,eAAmB,CACtB,ACFD,2BACI,0BAA4B,CAC/B",file:"common.pcss",sourcesContent:['.single-total {\n    position: relative;\n    text-align: center;\n    font-size: 0.8vw;\n    font-weight: 200 !important;\n    line-height: 0.8vw;\n    color: grey;\n    font-family: "Roboto","Droid","Helvetica Neue",Helvetica,Arial,sans-serif;\n}',"td.data-bar-cell {\n    padding: 1px 8px !important;\n}\n\n.data-bar-wrapper {\n    background-color: #eeeeee;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) inset;\n    margin-bottom: 4px;\n}\n\ntd.data-bar-cell .data-bar-wrapper .data-bar {\n    min-width: 1px;\n    color: #31708F;\n    background-color: #428bca;\n    box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.30) inset;\n    border-right: 1px solid #bb401f;\n}\n\n.data-bar-custom-text {\n    margin-right: 2px;\n    margin-top: 3px;\n    padding-top: 2px;\n    padding-bottom: 2px;\n    text-align: right;\n}\n\n.data-bar-badge {\n    background-color: #fff;\n    border: 1px solid #d3d3d3;\n    border-radius: 2px;\n    color: #800080;\n    opacity: 0.88;\n    padding-left: 2px;\n    padding-right: 2px;\n}","/* Cell Highlighting */\n\ntd.range-low {\n    background-color: #DFF0D8 !important;\n    color: #3C763D !important;\n    font-weight: bold;\n}\n\ntd.range-elevated {\n    background-color: #FCF8E3 !important;\n    color: #8A6D3B !important;\n    font-weight: bold;\n}\n\ntd.range-severe {\n    background-color: #F2DEDE !important;\n    color: #A94442 !important;\n    font-weight: bold;\n}\n\ntd.range-unauth {\n    font-weight: bold;\n    color: #d9534f !important;\n}\n\ntd.range-auth {\n    font-weight: bold;\n    color: #428bca !important;\n}\n\ntd.range-err {\n    font-weight: bold;\n    color: orange !important;\n}\n\ntd.inbound {\n    background-color: #D9EDF7 !important;\n    border-color: #BCE8F1 !important;\n    color: #31708F !important;\n    font-weight: bold !important;\n}\n\ntd.outbound {\n    background-color: #F5E0EC !important;\n    border-color: #BDA8B3 !important;\n    color: #7E6974 !important;\n    font-weight: bold !important;\n}\n\n",'#awstags {\n    display: inline-block;\n    margin-right: 10px;\n}\n\n.tag-autocomplete {\n    position: absolute;\n    z-index: 999;\n    border: 1px solid rgba(82, 168, 236, 0.8);\n    background-color: white;\n    margin-top: -9px;\n    width: 218px;\n    max-height: 200px;\n    overflow-y: auto;\n    display: none;\n\n\n\n    > ul {\n        list-style-type: none;\n        margin: 0;\n\n        > li {\n            border-top: 1px dotted #ccc;\n            color: #1e93c6;\n            padding-left: 5px;\n            line-height: 23px;\n            cursor: pointer;\n\n            &.active {\n                background-color: rgba(0, 0, 0, 0.05);\n            }\n\n            &:hover {\n                background-color: rgba(0, 0, 0, 0.05);\n            }\n\n            &.tag-loading {\n                cursor: default;\n                color: black;\n\n                > .loading-img {\n                    width: 16px;\n                    height: 16px;\n                    margin-top: 2px;\n                    margin-right: 5px;\n                    display: block;\n                    float: left;\n                    background-image: url("../../img/loading-16.gif");\n                }\n            }\n        }\n    }\n}\n',".hide-messages {\n    margin-left: 30px;\n    margin-bottom: 10px;\n    display: inline-block;\n}\n\n.sourcetype-checker {\n    margin-bottom: 0px;\n}",'@import "./SingleValueRenderer.pcss";\n@import "./TableBarRenderer.pcss";\n@import "./TableCellRenderer.pcss";\n@import "./TagInputView.pcss";\n@import "./MessageView.pcss";\n\n.slidenavList.scroll-group{\n    max-height:350px !important;\n}'],sourceRoot:"webpack://"}])},function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAAQAPIFANLS0qmpqVhYWCAgIIKCgu7u7v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUAo/eHBhY2tldCBiACH5BAkKAAUALAAAAAAQABAAAAMiWLo1KiwuV4CUDhZyZ4FcF4VFIC6Aea4d4LpsLM90bd9MAgAh+QQJCgAGACwEAAAACwAGAAADFjhmsrRLMfNgnDVA1Za21lcA4AKQRgIAIfkECQoABQAsAgAAAAsABQAAAxRYJUoaKrYC4lDMQVoudEqlXJKYAAAh+QQJCgAFACwAAAAACwAGAAADFVhapKFgFeNkEaq9uLBeQ2cpQzgWCQAh+QQJCgAHACwAAAAACAAIAAADFnh6obCnOEVUe5QdIFaFggGNy2AOUAIAIfkECQoABgAsAAAAAAYACwAAAxVoarCuQTVoClmR3beEF5wzDMoALgkAIfkECQoABQAsAAACAAUACwAAAxJYBdocbsHWiCWUClG4Gg34KQkAIfkECQoABgAsAAAEAAYACwAAAxQItlzK0IQZYiRkkWoE9Aw4RCMzJgAh+QQJCgAGACwAAAcACAAJAAADFggK1v4vhMgMgdYUM9o1AoeJTkhCQwIAIfkECQoABQAsAAAJAAsABwAAAxdYBaCuTYVHpxJlOEsK1pThUUo3ZuRZJAAh+QQJCgAHACwCAAoACwAGAAADGHgH2tNMkWPOi+FMoZ4q2gE2RxYeHCmpCQAh+QQJCgAFACwEAAkACwAHAAADF1i6FcNMrKdCK3KBS1QuxgUVm9iN1pgAACH5BAkKAAUALAcABwAJAAkAAAMXWFrTvTAWISRRpoISyl1b54FYtHGmpCQAIfkECQoABgAsCQAEAAcACwAAAxRoqrPQK0ZBqYyFxLB0MZyjhJcYJQAh+QQFCgAFACwKAAIABgALAAADFlg1qtyviCZmu4VojZUJDdCAhYiZRQIAOw=="},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,a;i=[n(4),n(29),n(57),n(7),n(71)],a=function(e,t,n,i,a){var o=i.AlertModel;return n.extend({defaults:{tags:[],alerts:[]},initialize:function(){n.prototype.initialize.apply(this,arguments),this._formatData()},_formatData:function(){var t=this.get("jobSearch"),n=t.data("results",{output_mode:"json",count:0});n.on("data",function(){var t=n.data().results,i=[],o=[],s=[],r=[];t.forEach(function(t){a.JOB_TAGS in t&&!e.isEmpty(t[a.JOB_TAGS])&&(i=e.union(i,t[a.JOB_TAGS].split(","))),a.JOB_ALERT_ID in t&&!e.isEmpty(t[a.JOB_ALERT_ID])&&!e.isEmpty(t[a.JOB_ALERT_ID])&&o.push(t[a.JOB_ALERT_ID]),a.JOB_ID in t&&(s[t[a.JOB_ID]]=t,r[t[a.JOB_NAME]]=t[a.JOB_ID])}),this.set({tags:i.sort(),alertIds:o,jobs:s,name2id:r}),this._loadAlerts()}.bind(this))},_loadAlerts:function(){var e=this.get("alertIds"),t=this.get("alerts");e.forEach(function(e){if(!(e in t)){var n=new o;n.set("id",e),n.fetch({success:function(i,a){t[e]=n,this.set("alerts",t)}.bind(this),error:function(e,t){}.bind(this)})}}.bind(this))},getJobWithName:function(e){var t=this.get("jobs"),n=this.get("name2id");return e in n&&n[e]in t?t[n[e]]:null},getJobWithId:function(e){var t=this.get("jobs");return e in t?t[e]:null},getAlertWithId:function(e){var t=this.get("alerts");return e in t?t[e]:null}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(29),n(4),n(5),n(63),n(71)],a=function(e,t,n,i,a){return i.BaseCellRenderer.extend({canRender:function(e){return"Severity"===e.field},render:function(e,n){e.html("");var i=parseInt(n.value);t.isNaN(i)||i>4||i<=-1?(e.css("background-color",a.INVALID_SEVERITY_COLOR),e.attr({"data-toggle":"tooltip","data-placement":"top","data-html":"true"}),i===-1?e.attr({"data-original-title":"No severity provided."}):e.attr({"data-original-title":"Invalid severity provided, it should be integer from 1 to 4."}),e.tooltip({container:"body"})):e.css("background-color",a.SEVERITY_COLOR_MAP[n.value])}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(29),n(5),n(7),n(2),n(107),n(63),n(33),n(74),n(69),n(108),n(110),n(113),n(71)],a=function(e,t,n,i,a,o,s,r,l,c,d,u,p,h){var f=a.Components.getInstance("submitted"),A=a.Components.getInstance("default");return A.set("tags",""),a.setFilter("tag2spl",function(t){var n=["| eval match_count = 0"],t=e.filter(t.split(","),function(t){return!e.isEmpty(t)});t.forEach(function(e){n.push("match_count = match_count + if(match("+h.JOB_TAGS+', "^.*'+e+'.*$"), 1, 0)')});var i=n.join(",")+"| where match_count="+t.length;return i}),A&&f&&f.set(A.toJSON()),s.extend({initialize:function(){s.prototype.initialize.apply(this,arguments),this.models={},this.models.input=new n.Model,this.models.job=new o,this.models.tableModel=this.settings.get("models").tableModel,this.children={},this.children.job=new d({models:{input:this.models.input}}),this.tags=[],this.multidropdown=new l({id:"tagsMultidropdown",allowCustomValues:!0,choices:[],el:t("#tags")},this).render();var e={display:"inline-block","padding-right":"30px"};t("#custom_multidropdown").parent().parent().css(e),this.tagsSM=new r({id:"tagSearch",preview:!1,search:"| rest servicesNS/nobody/splunk_app_aws/configs/conf-anomalyconfigs fillcontents=1 splunk_sever=local | search "+h.JOB_PRIORITY+"=$priority$ "+h.JOB_SCHEDULE+"=$schedule$"},{tokens:!0}),this.tagsSM.on("search:done",function(){var e=this.tagsSM.data("results",{output_mode:"json"});e.once("data",function(){var t=e.data().results;this.tags=this._formatTags(t);for(var n=[],i=0;i<this.tags.length;i++)n.push({label:this.tags[i],value:this.tags[i]});this.multidropdown.settings.set("choices",n),this.multidropdown.on("change",function(){var e=this.multidropdown.val();A.set("tags",e.join(",")),A&&f&&f.set(A.toJSON())},this)}.bind(this))}.bind(this)),this.children.info=new c,this.callback=this.settings.get("callback"),this.addCellRenderer(new u({models:{input:this.models.input,tableModel:this.models.tableModel,job:this.models.job},children:{info:this.children.info,job:this.children.job
},callback:this.callback})),this.addRowExpansionRenderer(new p({models:{input:this.models.input,application:this.models.application,tableModel:this.models.tableModel}})),this.listenTo(this.children.job,"saveJob",this._updateJobContent.bind(this)),this.listenTo(this.children.info,"changeJobMode",this._updateJobMode.bind(this)),this.listenTo(this.children.info,"deleteJob",this._deleteJob.bind(this)),this.listenTo(this.children.info,"deleteAlert",this._deleteAlert.bind(this))},_formatTags:function(t){var n=[];return t.forEach(function(t){h.JOB_TAGS in t&&!e.isEmpty(t[h.JOB_TAGS])&&(n=e.union(n,t[h.JOB_TAGS].split(",")))}),n.sort()},_updateJobContent:function(){var n=this.models.input.get(h.JOB_ID),i=e.pick(this.models.input.toJSON(),h.JOB_NAME,h.JOB_DESCRIPTION,h.JOB_PRIORITY,h.JOB_SCHEDULE,h.JOB_TRAIN,h.JOB_TAGS);t.when(this.models.job.updateStanza(n,i)).then(function(){this.callback.allUpdate(),this.tagsSM.startSearch()}.bind(this),function(){this.children.info.showFail("job","update")}.bind(this))},_updateJobMode:function(e,n){var i={};i[h.JOB_MODE]=n,t.when(this.models.job.updateStanza(e,i)).then(function(){this.callback.jobUpdate()}.bind(this),function(){this.children.info.showFail("job","update")}.bind(this))},_deleteJob:function(n,i){t.when(this.models.job.deleteStanza(n)).then(function(){e.isEmpty(i)||this._deleteAlert(n,i,!1);var t=e.template(h.UPDATE_SCHEDULE_CHECKER_JOB_SPL);new r({search:t({jobId:n})}),this.callback.allUpdate(),this.callback.scheduleCheckerUpdate(),this.tagsSM.startSearch()}.bind(this),function(){this.children.info.showFail("job","delete")}.bind(this))},_deleteAlert:function(n,i,a){if(i.destroy({wait:!0}),a){var o={};o[h.JOB_ALERT_ID]="",t.when(this.models.job.updateStanza(n,o).then(function(){var t=e.template(h.UPDATE_SCHEDULE_CHECKER_ALERT_SPL);new r({search:t({jobId:n})}),this.callback.jobUpdate(),this.callback.scheduleCheckerUpdate()}.bind(this),function(){this.children.info.showFail("job","update")}.bind(this)))}},render:function(){s.prototype.render.apply(this,arguments),this.$el.append(this.children.info.render()),this.$el.append(this.children.job.render())}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(29),n(4),n(5),n(2),n(71)],a=function(e,t,n,i,a){var o=i.createService({owner:"nobody",app:"splunk_app_aws"});return n.Model.extend({defaults:{success:!1,configs:{},tags:[],usedNames:[]},initialize:function(){n.Model.prototype.initialize.apply(this,arguments)},fetchData:function(){if(this.get("success"))return void this.trigger("loadSuccess");var e=o.request("configs/conf-anomalyconfigs","GET",{fillcontents:1});e.done(function(e){var n=JSON.parse(e),i={},o=[],s=[];t.each(n.entry,function(e){t.isEmpty(e.name)||(i[e.name]=e.content,i[e.name][a.JOB_ID]=e.name,a.JOB_TAGS in i[e.name]&&!t.isEmpty(i[e.name][a.JOB_TAGS])&&(o=t.union(o,i[e.name][a.JOB_TAGS].split(","))),a.JOB_NAME in i[e.name]&&!t.isEmpty(i[e.name][a.JOB_NAME])&&s.push(i[e.name][a.JOB_NAME]))}),o.sort(),this.set({configs:i,tags:o,success:!0,usedNames:s}),this.trigger("loadSuccess")}.bind(this)),e.fail(function(e,t,n){this.trigger("loadFail",n)}.bind(this))},getNameWithSearch:function(e){for(var t=this.get("configs"),n=Object.keys(t),i=0;i<n.length;i++){var o=t[n[i]];if(a.JOB_NAME in o&&a.JOB_SEARCH in o&&o[a.JOB_SEARCH]===e)return o[a.JOB_NAME]}return""},getJobWithName:function(e){for(var t=this.get("configs"),n=Object.keys(t),i=0;i<n.length;i++){var o=t[n[i]];if(a.JOB_NAME in o&&o[a.JOB_NAME]===e)return o}return null},createStanza:function(t){var n=this._generateUUID(),i=e.extend({name:n},t),a=o.request("configs/conf-anomalyconfigs","POST",null,i),s=e.Deferred();return a.done(function(e){this.set("success",!1),s.resolve(n)}.bind(this)),a.fail(function(e,t,n){s.reject()}.bind(this)),s.promise()},updateStanza:function(t,n){var i=o.request("configs/conf-anomalyconfigs/"+t,"POST",null,n),a=e.Deferred();return i.done(function(e){this.set("success",!1),a.resolve()}.bind(this)),i.fail(function(e,t,n){a.reject()}.bind(this)),a.promise()},deleteStanza:function(t){var n=o.request("configs/conf-anomalyconfigs/"+t,"DELETE"),i=e.Deferred();return n.done(function(e){i.resolve()}.bind(this)),n.fail(function(e,t,n){i.reject()}.bind(this)),i.promise()},_generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(29),n(5),n(70),n(71),n(109)],a=function(e,t,n,i,a,o){var s=i.Modal,r=i.ControlGroup,l=[],c='<a href="#" class="btn cancel modal-btn-cancel pull-left" data-dismiss="modal">Cancel</a>',d='<a href="#" class="btn btn-primary modal-btn-primary pull-right">Save</a>';return s.extend({initialize:function(e){s.prototype.initialize.apply(this,arguments),this.models=this.options.models,this.mode=a.DETECT_MODE|a.CREATE_MODE;var t={attachDialogTo:".modal:visible",scrollContainer:".modal:visible .modal-body:visible"};this.nameView=new r({controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:a.JOB_NAME,model:this.models.input},label:"Name"}),this.descriptionView=new r({controlType:"Textarea",controlClass:"controls-block",controlOptions:{modelAttribute:a.JOB_DESCRIPTION,model:this.models.input,placeholder:"Optional"},label:"Description"}),this.scheduleView=new r({className:"control-group",controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{modelAttribute:a.JOB_SCHEDULE,model:this.models.input,items:[{label:"Run every hour",value:"Hourly"},{label:"Run every day",value:"Daily"},{label:"Run every week",value:"Weekly"},{label:"Run every month",value:"Monthly"}],save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0,popdownOptions:t},label:"Schedule"}),this.severityView=new r({className:"control-group",controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{modelAttribute:a.JOB_PRIORITY,model:this.models.input,items:[{label:"Low",value:"1"},{label:"Medium",value:"2"},{label:"High",value:"3"},{label:"Critical",value:"4"}],save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0,popdownOptions:t},label:"Priority"}),this.containerEl=document.createElement("div"),this.containerEl.setAttribute("id","customselect"),this.containerEl.style.cssText="padding-bottom: 10px;margin-left: 180px; width: 330px;",this.trainNumView=new r({controlType:"Text",controlClass:"controls-block",controlOptions:{modelAttribute:"trainNum",model:this.models.input},label:"Train period",additionalClassNames:"control-train-num"}),this.trainUnitView=new r({className:"control-group",controlType:"SyntheticSelect",controlClass:"controls-block",controlOptions:{modelAttribute:"trainUnit",model:this.models.input,items:[{label:"seconds",value:"s"},{label:"minutes",value:"m"},{label:"hours",value:"h"},{label:"days",value:"d"}],save:!1,toggleClassName:"btn",labelPosition:"outside",elastic:!0,popdownOptions:t}})},events:t.extend({},s.prototype.events,{"click a.modal-btn-primary":function(e){e.preventDefault(),this._validateInput()&&(0==l.length?this.models.input.set(a.JOB_TAGS,""):this.models.input.set(a.JOB_TAGS,l.join(",")),l=[],this.models.input.set(a.JOB_TRAIN,Math.abs(parseInt(this.models.input.get("trainNum")))+this.models.input.get("trainUnit")),this.unmount(),this.hide(),this.trigger("saveJob",this.mode))},"click a.modal-btn-cancel":function(e){this.unmount()}}),handleChangeValueMultiselect:function(e,t){var n=t.values;l=n},_validateInput:function(){var t=!0,n=this.models.input.get(a.JOB_NAME),i=parseInt(this.models.input.get("trainNum"));return e.isEmpty(n)?(this.$(".job-modal-hint").html("Unable to create job with empty name."),t=!1):(this.mode&a.CREATE_MODE)>0&&this.models.input.get("usedNames").indexOf(n)>=0?(this.$(".job-modal-hint").html('Unable to create job with name "'+n+'". A job with that name already exists.'),t=!1):e.isNaN(i)&&(this.$(".job-modal-hint").html("Invalid train period number "+i+" . Integer is required."),t=!1),t},show:function(e,t){this.mode=t;var n=new Set;if(this.models.input.attributes.job_tags)var n=new Set(this.models.input.attributes.job_tags.split(","));if(l=1==n.size&&""==Array.from(n)[0]?[]:Array.from(n),this.unmount=o.createMultiselectComponent(n,e,this.containerEl,this.handleChangeValueMultiselect),(t&a.CREATE_MODE)>0){var i={};i[a.JOB_NAME]="",i[a.JOB_PRIORITY]="1",i[a.JOB_DESCRIPTION]="",i[a.JOB_SCHEDULE]="Hourly",i[a.JOB_TAGS]="",i[a.JOB_ALERT_ID]="",0===(t&a.DETECT_MODE)&&(i.trainNum="0",i.trainUnit="m"),this.models.input.set(i),this.unmount=o.createMultiselectComponent(n,e,this.containerEl,this.handleChangeValueMultiselect)}(t&a.DETECT_MODE)>0&&(this.trainNumView.disable(),this.trainUnitView.disable()),this.$el.modal("show")},render:function(){return this.$el.html(s.TEMPLATE),this.$(s.HEADER_TITLE_SELECTOR).html("Anomaly detection job settings"),this.$(s.FOOTER_SELECTOR).append(c),this.$(s.FOOTER_SELECTOR).append(d),this.$(s.BODY_SELECTOR).append(s.FORM_HORIZONTAL),this.nameView.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.descriptionView.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.severityView.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.scheduleView.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.$(s.BODY_FORM_SELECTOR).append('<label class="control-label" for="customselect" id="customlabel">Tags</label>'),this.$(s.BODY_FORM_SELECTOR).append(this.containerEl),this.trainNumView.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.trainUnitView.render().appendTo(this.$(s.BODY_FORM_SELECTOR)),this.$(s.BODY_FORM_SELECTOR).append('<p class="job-modal-hint"></p>'),this}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(70)],a=function(e){var t=e.React,n=e.ReactRender,i=e.MultiselectReact;return{createMultiselectComponent:function(e,a,o,s){for(var r,l=[],c=0;c<a.length;c++){var d={label:a[c],value:a[c]};l.push(t.createElement(i.Option,d,null))}return r=1==e.size&&""==Array.from(e)[0]?t.createElement(i,{allowNewValues:!0,onChange:s},l):t.createElement(i,{allowNewValues:!0,onChange:s,defaultValues:Array.from(e)},l),n(r,o)}}}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(29),n(4),n(5),n(2),n(63),n(111),n(7),n(112),n(71),n(35),n(37)],a=function(e,t,n,i,a,o,s,r,l,c,d){var u=s.PopdownView,p=s.moment,h=c.buildLinkNode(d.AWS_ANOMALY_DETECTION),f="alert",A="job",m={hourly:1,daily:2,weekly:3,monthly:4},g={hourly:{unit:"hours",value:1},daily:{unit:"days",value:1},weekly:{unit:"days",value:7},monthly:{unit:"months",value:1}};return a.BaseCellRenderer.extend({initialize:function(e){this.models=e.models,this.children=e.children,this.callback=e.callback,this.children.alert=new o,this.scheduleCheckerMap={},this._formatScheduleTimeCheckerData(),this.listenTo(this.children.info,"createAlert",this.createAlert.bind(this))},_formatScheduleTimeCheckerData:function(){var e=i.Components.get("scheduleCheckerSearch"),t=e.data("results",{output_mode:"json",count:0});t.on("data",function(){this.scheduleCheckerMap={};var e=t.data().results;e.forEach(function(e){var t="1"===e.is_alert?f:A;e[l.JOB_ID]in this.scheduleCheckerMap||(this.scheduleCheckerMap[e[l.JOB_ID]]={});var n="earliest_time"in e?e.earliest_time:0,i="latest_time"in e?e.latest_time:0,a="day"in e?e.day:0;this.scheduleCheckerMap[e[l.JOB_ID]][t]={run_time:e.run_time,earliest_time:n,latest_time:i,day:a}}.bind(this))}.bind(this))},canRender:function(e){return"Action"===e.field},render:function(e,n){var i=this.models.tableModel.getJobWithId(n.value);this._calEarliestLatest(i),this._calTrain(i),this._calDrilldownLink(i);var a=this._calAlertValidation(i);e.addClass("actions"),e.append(t.template(r)({hasAlert:!t.isEmpty(i[l.JOB_ALERT_ID]),isEnable:(i[l.JOB_MODE]&l.ENABLE_MODE)>0,isScheduleError:!t.isEmpty(a),tooltipContent:a,linkNode:h})),t.isEmpty(a)||e.find(".schedule-tooltip").tooltip({container:"body"}),new u({el:e.find(".shared-alertcontrols-editmenu"),attachDialogTo:"body"}),e.find("a.openInLink").click(this.openInSearch.bind(this,i)),e.find("a.edit-job").click(this.editJob.bind(this,i)),e.find("a.disable-job").click(this.changeJobStatus.bind(this,i)),e.find("a.enable-job").click(this.changeJobStatus.bind(this,i)),e.find("a.delete-job").click(this.deleteJob.bind(this,i)),e.find("a.create-alert").click(this.createAlert.bind(this,i)),e.find("a.edit-alert").click(this.editAlert.bind(this,i)),e.find("a.delete-alert").click(this.deleteAlert.bind(this,i))},_calEarliestLatest:function(e){var t=e[l.JOB_SCHEDULE],n=e[l.JOB_TRAIN];switch(t){case"Hourly":e.earliest="-h@h-"+n,e.latest="@h";break;case"Daily":e.earliest="-d@d-"+n,e.latest="@d";break;case"Weekly":e.earliest="-7d@d-"+n,e.latest="@d";break;default:e.earliest="-m@d-"+n,e.latest="@d"}},_calTrain:function(e){var t=e[l.JOB_TRAIN];e.trainUnit=t.slice(-1),e.trainNum=t.slice(0,-1)},_calDrilldownLink:function(e){var t=["earliest="+e.earliest,"latest="+e.latest,"display.general.type=visualizations","display.page.search.mode=smart","display.page.search.tab=visualizations","display.visualizations.type=custom","display.visualizations.custom.type=splunk_app_aws.anomaly_detection_viz","q="+encodeURIComponent(("|"===e[l.JOB_SEARCH].trimLeft().charAt(0)?"":"search ")+e[l.JOB_SEARCH])];e.drilldownLink="search?"+t.join("&")},_calAlertValidation:function(e){var n=e[l.JOB_ID];if(t.isEmpty(e[l.JOB_ALERT_ID]))return null;var i=this.models.tableModel.getAlertWithId(e[l.JOB_ALERT_ID]);if(t.isNull(i))return null;var a=i.cron.get("cronType"),o=e[l.JOB_SCHEDULE];if("custom"===a&&(a=this._calScheduleType(i.cron),"custom"===a))return null;if(m[o.toLowerCase()]<m[a])return null;if(m[o.toLowerCase()]>m[a])return"The job is scheduled to run "+o.toLowerCase()+" while alert is scheduled to run "+a+". \n                Set the alert to run at an interval equal to or larger than the job's interval.";if(!(n in this.scheduleCheckerMap))return null;if(!(f in this.scheduleCheckerMap[n]&&A in this.scheduleCheckerMap[n]))return null;var s=p(1e3*parseInt(this.scheduleCheckerMap[n][f].run_time)),r=p(1e3*parseInt(this.scheduleCheckerMap[n][A].run_time)),c=!0;if("hourly"===o)s.isBefore(r)&&(c=!1);else{var d=this.scheduleCheckerMap[n][f].day,u=this.scheduleCheckerMap[n][A].day;d===u&&s.isBefore(r)&&(c=!1),d>u&&(s.subtract(g[o.toLowerCase()].value,g[o.toLowerCase()].unit),c=!1)}if(!c)return"The alert is scheduled to run at an earlier time ("+s.format("YYYY-MM-DD HH:mm:ss")+") than the job ("+r.format("YYYY-MM-DD HH:mm:ss")+") \n                and therefore may fail to pick up the results returned by the latest job run. Schedule the alert to run at a later time than the job.";var h=p(1e3*parseInt(this.scheduleCheckerMap[n][f].earliest_time)),_=p(1e3*parseInt(this.scheduleCheckerMap[n][f].latest_time)),b=p(1e3*parseInt(this.scheduleCheckerMap[n][A].latest_time)),v=p(1e3*parseInt(this.scheduleCheckerMap[n][A].latest_time));return v.subtract(g[o.toLowerCase()].value,g[o.toLowerCase()].unit),h.isAfter(v)||_.isBefore(b)?"The alert's search time range ("+h.format("YYYY-MM-DD HH:mm:ss")+" ~ "+_.format("YYYY-MM-DD HH:mm:ss")+") \n                doesn't cover the job's ("+v.format("YYYY-MM-DD HH:mm:ss")+" ~ "+b.format("YYYY-MM-DD HH:mm:ss")+") \n                and therefore may fail to pick up the results returned by the latest job run. Configure the alert's earliest and latest time to cover the job.":null},_calScheduleType:function(e){var t=(e.get("minute"),e.get("hour")),n=e.get("dayOfMonth"),i=e.get("month"),a=e.get("dayOfWeek");return"*"!==i?"custom":"*"===a&&"*"===n&&"*"===t?"hourly":"*"===a&&"*"===n?"daily":"*"!==a&&"*"===n?"weekly":"*"!==n?"weekly":"custom"},openInSearch:function(e){window.open(e.drilldownLink)},editJob:function(e){this.models.input.set(e);var t=e[l.JOB_MODE]|l.EDIT_MODE;this.children.job.show(this.models.tableModel.get("tags"),t)},changeJobStatus:function(e,t){var n="disable-job"===t.target.className?"Disable":"Enable",i=e[l.JOB_MODE]^l.ENABLE_MODE;this.children.info.showJobModeChangeConfirm(n,e[l.JOB_ID],e[l.JOB_NAME],i)},deleteJob:function(e){var n=null;t.isEmpty(e[l.JOB_ALERT_ID])||(n=this.models.tableModel.getAlertWithId(e[l.JOB_ALERT_ID])),this.children.info.showJobDeleteConfirm(e[l.JOB_ID],e[l.JOB_NAME],n)},createAlert:function(n){t.isString(n)&&(n=this.models.tableModel.getJobWithName(n)),this.children.alert.showCreateAlert(n[l.JOB_ID],n[l.JOB_NAME],n[l.JOB_SCHEDULE],n[l.JOB_SEARCH],function(t){var i={};i[l.JOB_ALERT_ID]=t.id,e.when(this.models.job.updateStanza(n[l.JOB_ID],i)).then(function(){this.callback.jobUpdate()}.bind(this),function(){this.children.info.showFail("job","update")}.bind(this))},this)},editAlert:function(e){var n=null;t.isEmpty(e[l.JOB_ALERT_ID])||(n=this.models.tableModel.getAlertWithId(e[l.JOB_ALERT_ID])),t.isNull(n)||t.isUndefined(n)?this.children.info.showAlertLoadFail(e[l.JOB_NAME]):this.children.alert.showEditAlert(n,function(e){this.callback.jobUpdate()},this)},deleteAlert:function(e){var n=null;t.isEmpty(e[l.JOB_ALERT_ID])||(n=this.models.tableModel.getAlertWithId(e[l.JOB_ALERT_ID])),this.children.info.showAlertDeleteConfirm(e[l.JOB_ID],e[l.JOB_NAME],n)}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t,n){var i,a;i=[n(4),n(5),n(70),n(71)],a=function(e,t,n,i){var a=n.splunkUtils,o=n.SharedModels,s=n.BaseView,r=n.ReportModel,l=n.ModAlertActionsCollection,c=n.CreateAlertView,d=n.EditAlertView;return s.extend({initialize:function(){this.models={},this.children={},this.collection={},this.models.user=o.get("user"),this.models.serverInfoModel=o.get("serverInfo"),this.models.application=o.get("app"),this.models.application.set("page","search"),this.collection.alertActionsCollection=new l,this.collection.alertActionsCollection.fetch({data:{app:this.models.application.get("app"),owner:this.models.application.get("owner"),search:"disabled!=1"},addListInTriggeredAlerts:!0})},showCreateAlert:function(e,t,n,o,s,l){var d=new r;d.fetch({data:{app:this.models.application.get("app"),owner:this.models.application.get("owner")},success:function(r,u){d.entry.content.set("search",'search index="'+i.INDEX+'" sourcetype="'+i.SOURCE_TYPE+'" '+i.JOB_ID+'="'+e+'" | eval total = 0 | foreach outlier_* [eval outlier_count_<<MATCHSTR>> = if(<<FIELD>>=="True", 1, 0) , total = total + outlier_count_<<MATCHSTR>>] | where total>0 | anomalytable | sort - Value | table _time, "Field name", Value, info_min_time, info_max_time'),this.children.alertDialog=new c({model:{report:d,application:this.models.application,user:this.models.user,serverInfo:this.models.serverInfoModel},onHiddenRemove:!0});var p="http://"+window.location.hostname+":"+window.location.port,h=["earliest=$result.info_min_time$","latest=$result.info_max_time$","display.general.type=visualizations","display.page.search.mode=smart","display.page.search.tab=visualizations","display.visualizations.type=custom","display.visualizations.custom.type=splunk_app_aws.anomaly_detection_viz","q="+encodeURIComponent(("|"===o.trimLeft().charAt(0)?"":"search ")+o)],f="### You can edit your own content here ###\n\nAnomaly detection job: "+t+"\nYou can view the detected results via link: "+p+a.make_full_url("app/splunk_app_aws/search?")+h.join("&"),A=this.children.alertDialog.model.alert;A.entry.content.set({"action.email.message.alert":f,"action.email.inline":!0});var m=A.cron;m.setDefaults=this.setDefaults.bind(m),m.setDefaults();var g=this.setEarliestLatest.bind(A);g(),A.entry.content.on("change:dispatch.earliest_time",g),this.children.alertDialog.model.alert.entry.acl.set("can_share_app",!0),this.children.alertDialog.model.alert.on("saveSuccess",s.bind(l,this.children.alertDialog.model.alert)),this.children.alertDialog.render().appendTo($("body")).show(),m.set({cronType:n.toLowerCase()})}.bind(this)})},showEditAlert:function(e,t,n){this.children.alertDialog=new d({model:{alert:e,application:this.models.application,user:this.models.user,serverInfo:this.models.serverInfoModel},collection:{alertActions:this.collection.alertActionsCollection},onHiddenRemove:!0});var i=this.children.alertDialog.model.inmem;i.cron.setDefaults=this.setDefaults.bind(i.cron);var a=this.setEarliestLatest.bind(i);a(),i.entry.content.on("change:dispatch.earliest_time",a),i.on("sync",t.bind(n,e)),this.children.alertDialog.render().appendTo($("body")).show()},setDefaults:function(){switch(this.get("cronType")){case"hourly":this.set("minute","15");break;case"daily":this.set("hour","1");break;case"weekly":this.set({dayOfWeek:"1",hour:"2"});break;case"monthly":this.set({dayOfMonth:"1",hour:"3"})}},setEarliestLatest:function(){switch(this.cron.get("cronType")){case"hourly":this.entry.content.set({"dispatch.earliest_time":"-1h@h","dispatch.latest_time":"@h"},{silent:!0});break;case"daily":this.entry.content.set({"dispatch.earliest_time":"-1d@d","dispatch.latest_time":"@d"},{silent:!0});break;case"weekly":this.entry.content.set({"dispatch.earliest_time":"-1w@d","dispatch.latest_time":"@d"},{silent:!0});break;case"monthly":this.entry.content.set({"dispatch.earliest_time":"-1mon@d","dispatch.latest_time":"@d"},{silent:!0});break;default:return}}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports='<a class="openInLink" href="#">Open in Search</a>\n<div class="shared-alertcontrols-editmenu">\n    <a class="dropdown-toggle" href="#">Edit<span class="caret"></span></a>\n    <div class="dropdown-menu dropdown-menu-narrow">\n        <div class="arrow"></div>\n        <ul class="second-group">\n            <li>\n                <a class="edit-job" href="#">Edit Job</a>\n            </li>\n            <li>\n                <% if(isEnable) {%>\n                <a class="disable-job" href="#">Disable Job</a>\n                <%} else {%>\n                <a class="enable-job" href="#">Enable Job</a>\n                <%}%>\n            </li>\n            <li>\n                <a class="delete-job" href="#">Delete Job</a>\n            </li>\n        </ul>\n        <ul class="third-group">\n            <li>\n                <% if(hasAlert) {%>\n                <a class="edit-alert" href="#">Edit Alert</a>\n                <%} else {%>\n                <a class="create-alert" href="#">Create Alert</a>\n                <%}%>\n            </li>\n            <% if(hasAlert) {%>\n            <li>\n                <a class="delete-alert" href="#">Delete Alert</a>\n            </li>\n            <%}%>\n        </ul>\n    </div>\n</div>\n<% if(isScheduleError) {%>\n    <span data-html="true" data-toogle="tooltip" data-placement="top" class="icon-warning-sign schedule-tooltip"\n    data-original-title="<%= tooltipContent %>"></span><%= linkNode %>\n<% } %>'},function(e,t,n){var i,a;i=[n(29),n(4),n(63),n(71),n(7),n(114),n(115)],a=function(e,t,n,i,a,o,s){var r=a.SharedModels,l=a.splunkd_utils;return n.BaseRowExpansionRenderer.extend({initialize:function(e){this.models=e.models,this.models.application=r.get("app")},canRender:function(e){return!0},render:function(e,t){e.html('<div class="summary-info"></div>'),e.find(".summary-info").append(this._getSettings(t))},_getSettings:function(e){var t=e.fields.indexOf("Action"),n=e.values[t],a=this.models.tableModel.getJobWithId(n);return this._getJobSettings(a)+"<br>"+this._getAlertSettings(a[i.JOB_ALERT_ID])},_getJobSettings:function(e){var n=t.template(o);return n(e)},_capitalize:function(e){return t.isEmpty(e)?e:e.charAt(0).toUpperCase()+e.slice(1)},_getAlertSettings:function(e){var n=this.models.tableModel.getAlertWithId(e);if(t.isEmpty(n))return"";var i=n.entry.content.get("ui.permissions"),a=i===l.USER?"Private":i===l.APP?"Shared in APP":"Shared Globally",o="Owned by "+this.models.application.get("owner"),r=this._capitalize(n.entry.content.get("ui.type")),c=n.cron.getScheduleString(),d=this._capitalize(n.entry.content.get("alert_type"))+" "+n.entry.content.get("alert_comparator")+" "+n.entry.content.get("alert_threshold")+".",u=t.template(s);return u({alertName:n.entry.get("name"),app:this.models.application.get("app"),permissions:a+". "+o+".",alertType:r+". "+c,triggerCondition:d})}})}.apply(t,i),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports='<div>\n    <h4 class="section-title">Job Details</h4>\n    <dl class="list-dotted">\n        <dt>Search:</dt>\n        <dd><%- job_search %></dd>\n        <dt>Description:</dt>\n        <dd><%- job_description %></dd>\n    </dl>\n</div>'},function(e,t){e.exports='<div>\n    <h4 class="section-title">Alert Settings</h4>\n    <dl class="list-dotted">\n        <dt>Name:</dt>\n        <dd><%- alertName %></dd>\n        <dt>App:</dt>\n        <dd><%- app %></dd>\n        <dt>Permissions:</dt>\n        <dd><%- permissions %></dd>\n        <dt>Alert Type:</dt>\n        <dd><%- alertType %></dd>\n        <dt>Trigger Condition:</dt>\n        <dd><%- triggerCondition %></dd>\n    </dl>\n</div>'},function(e,t,n){var i=n(117);"string"==typeof i&&(i=[[e.id,i,""]]);n(25)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(24)(),t.push([e.id,".shared-alertcontrols-editmenu{display:inline-block;margin-left:20px;posititon:relative}.open-arrow{margin-left:-8px}.open{display:block;top:15px;left:16.5px;margin-left:-81px;bottom:auto}.schedule-tooltip{display:inline-block;color:#f2b827;margin-left:20px;margin-right:10px}.tooltip-inner{opacity:.9;filter:alpha(opacity=90);min-width:200px;word-wrap:break-word;line-height:1.33333em}.hide-global-filters{vertical-align:top}","",{version:3,sources:["/./package/appserver/static/pcss/pages/anomaly_detection/anomaly_overview.pcss"],names:[],mappings:"AAAA,+BACI,qBAAsB,AACtB,iBAAkB,AAClB,kBAAoB,CACvB,AACD,YACI,gBAAkB,CACrB,AACD,MACI,cAAe,AACf,SAAU,AACV,YAAa,AACb,kBAAmB,AACnB,WAAa,CAChB,AACD,kBACI,qBAAsB,AACtB,cAAe,AACf,iBAAkB,AAClB,iBAAmB,CACtB,AACD,eACI,WAAa,AACb,yBAA0B,AAC1B,gBAAiB,AACjB,qBAAsB,AACtB,qBAAuB,CAC1B,AACD,qBAEI,kBAAmB,CACtB",file:"anomaly_overview.pcss",sourcesContent:[".shared-alertcontrols-editmenu {\n    display: inline-block;\n    margin-left: 20px;\n    posititon: relative;\n}\n.open-arrow {\n    margin-left: -8px;\n}\n.open {\n    display: block;\n    top: 15px;\n    left: 16.5px;\n    margin-left: -81px;\n    bottom: auto;\n}\n.schedule-tooltip {\n    display: inline-block;\n    color: #f2b827;\n    margin-left: 20px;\n    margin-right: 10px;\n}\n.tooltip-inner {\n    opacity: 0.9;\n    filter: alpha(opacity=90);\n    min-width: 200px;\n    word-wrap: break-word;\n    line-height: 1.33333em;\n}\n.hide-global-filters\n{\n    vertical-align:top;\n}"],sourceRoot:"webpack://"}])}])});