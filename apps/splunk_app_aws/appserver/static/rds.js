require(["splunkjs/mvc","app/splunk_app_aws/js/libs/underscore","app/splunk_app_aws/js/libs/backbone","app/splunk_app_aws/js/swc-aws/index","app/splunk_app_aws/js/libs/jquery","splunkjs/mvc/searchmanager","splunkjs/mvc/tokenforwarder","splunkjs/mvc/simplexml/ready!","splunkjs/mvc/tableview","splunkjs/mvc/simplesplunkview","app/splunk_app_aws/js/swc-aws/index_for_visualization","splunkjs/mvc/multidropdownview","splunkjs/mvc/simplexml/element/table","splunkjs/mvc/simplexml/element/chart","splunkjs/mvc/simpleform/input/multiselect"],function(e,t,n,a,i,r,o,s,l,c,u,d,p,h,g){return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var a,i;n.p=function(){function e(){for(var e,n,a="",i=0,r=arguments.length;i<r;i++)e=arguments[i].toString(),n=e.length,n>1&&"/"==e.charAt(n-1)&&(e=e.substring(0,n-1)),a+="/"!=e.charAt(0)?"/"+e:e;if("/"!=a){var o=a.split("/"),s=o[1];if("static"==s||"modules"==s){var l=a.substring(s.length+2,a.length);a="/"+s,window.$C.BUILD_NUMBER&&(a+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(a+="."+window.$C.BUILD_PUSH_NUMBER),"app"==o[2]&&(a+=":"+t("APP_BUILD",0)),a+="/"+l}}var c=t("MRSPARKLE_ROOT_PATH","/"),u=t("DJANGO_ROOT_PATH",""),d=t("LOCALE","en-US"),p="";return p=u&&a.substring(0,u.length)===u?a.replace(u,u+"/"+d.toLowerCase()):"/"+d+a,""==c||"/"==c?p:c+p}function t(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return e("/static/app/splunk_app_aws")+"/"}(),a=[n(4),n(29),n(2),n(7),n(146),n(33),n(143),n(147),n(148),n(150),n(151),n(73),n(36),n(152),n(48),n(53)],i=function(e,t,n,a,i,r,o,s,l,c,u,d,p){function h(){if(y=B.val(),B.val(null),"complete"===document.readyState)var e=setInterval(function(){void 0!=document.getElementsByClassName("edit-cancel")[0]&&(clearInterval(e),g())},300)}function g(){B.val(y),document.getElementsByClassName("edit-cancel")[0].onclick=function(){f()}}function f(){B.val(null);var e=setInterval(function(){void 0!=document.getElementsByClassName("edit-btn")[0]&&(B.val(y),clearInterval(e))},100)}function A(t){var a=n.Components.getInstance("default"),i="rdsIdFilter";if(t.length>0){var r=e(t).map(function(e){return'id="'+e+'"'}).join(" OR ");a.set(i,"("+r+")")}else a.unset(i)}function m(t,a){var i=n.Components.getInstance("default"),r=n.Components.getInstance("submitted",{create:!0});if(e(["mysql","postgres","oracle","sqlserver"]).each(function(e){i.unset(e),r.unset(e)}),!(t.length<1)){var o,s=a.settings.get("rdsEngines")||{};o=t.indexOf("*")>-1?e(s).values():e(t).map(function(e){return s[e]}),e.each(e.uniq(e.compact(o)),function(e){"mariadb"===e?e="mysql":e.indexOf("oracle")>-1?e="oracle":e.indexOf("sqlserver")>-1&&(e="sqlserver"),i.set(e,!0),r.set(e,!0)})}}function v(e,t){A(e,t),m(e,t)}function _(a){var o=E[a]||{},s="search_"+a;if(!n.Components.getInstance(s)){var l=o.splAgg||"avg(Average)",c=o.label;e.isUndefined(c)&&(c=a.replace(/([A-Z])([A-Z][^A-Z])/g,"$1 $2"),c=c.replace(/([^A-Z])([A-Z])/g,"$1 $2")),c="Average "+c;var u='`aws-cloudwatch-rds($accountId$, $region$)` $dimensionFilter$ metric_name="'+a+'" | `aws-cloudwatch-dimension-rex("DBInstanceIdentifier", "Instance")` | timechart '+l+" as value by Instance";return new r({id:s,earliest_time:"$earliest$",latest_time:"$latest$",search:u,preview:!0,auto_cancel:90,cancelOnUnload:!0,runWhenTimeIsUndefined:!1},{tokens:!0}),new i(e.extend({id:"chart_metric_"+a,title:p.gettext(c),managerid:s,el:t("#chart_metric_"+a),tokenDependencies:o.tokenDependencies,"charting.axisLabelsX.majorLabelStyle.rotation":"0","charting.axisLabelsX.majorLabelStyle.overflowMode":"ellipsisNone","charting.axisTitleX.visibility":"collapsed","charting.axisTitleY.visibility":"visible","charting.axisTitleY2.visibility":"visible","charting.axisX.scale":"linear","charting.axisY.scale":"linear","charting.axisY2.scale":"inherit","charting.axisY2.enabled":"0","charting.chart":"line","charting.chart.bubbleMaximumSize":"50","charting.chart.bubbleMinimumSize":"10","charting.chart.bubbleSizeBy":"area","charting.chart.nullValueMode":"gaps","charting.chart.showDataLabels":"none","charting.chart.sliceCollapsingThreshold":"0.01","charting.chart.stackMode":"default","charting.chart.style":"shiny","charting.drilldown":"all","charting.layout.splitSeries.allowIndependentYRanges":"0","charting.layout.splitSeries":"0","charting.legend.placement":"top","charting.legend.labelStyle.overflowMode":"ellipsisMiddle",resizable:!0},o.viewOptions||{}),{tokens:!0})}}function b(t){var a=n.Components.getInstance("chart_metric_"+t);e.isUndefined(a)||a.remove();var i=n.Components.getInstance("search_"+t);e.isUndefined(i)||i.dispose()}function C(a,i){function r(e){return document.getElementById("panel_metric_"+e)}function o(e){var t=e.replace(/([A-Z])([A-Z][^A-Z])/g,"$1 $2");t=t.replace(/([^A-Z])([A-Z])/g,"$1 $2");var n=document.createElement("div");n.setAttribute("id","panel_metric_"+e),n.setAttribute("class","dashboard-cell dashboard-layout-panel"),n.setAttribute("style","width: 100%;");var a=document.createElement("div");a.setAttribute("class","dashboard-panel with-title");var i=document.createElement("h2");i.innerHTML="Average "+t,i.setAttribute("class","panel-title");var r=document.createElement("div");return r.setAttribute("id","chart_metric_"+e),r.setAttribute("class","dashboard-element"),r.setAttribute("style","width: 100%;"),a.appendChild(i),a.appendChild(r),n.appendChild(a),n}function s(t,a){var i=n.Components.getInstance("default"),r=e(a.id.split("_")).last(),o=E[r];if(o&&o.viewOptions.tokenDependencies){var s=o.viewOptions.tokenDependencies.depends;if(i.get(s.slice(1,s.length-1))){t.appendChild(a);var l=_(r);l&&l.render()}}else{t.appendChild(a);var l=_(r);l&&l.render()}}function l(e){var t=document.createElement("div");return t.setAttribute("id","row_metric_"+e),t.setAttribute("class","dashboard-row dashboard-layout-rowcolumn-row chart-row"),t}function c(){var e=t("#layout1").children(".dashboard-row.dashboard-layout-rowcolumn-row.chart-row");if(e.length<1){x=0;var n=l(x);return x+=1,y(n),n}return e[e.length-1]}var u=document.getElementsByClassName("btn edit-btn");if(u.length>0&&void 0!=u[0]&&(u[0].onclick=function(){h()}),!e.isUndefined(a._data)&&!e.isNull(a._data)){e.isUndefined(i)&&(i=2);var d=a.settings.get("value");d&&d.indexOf("*")>-1&&(d=e(a._data).map(function(e){return e.metric_name}));var p=a.settings.previous("value")||[];p.indexOf("*")>-1&&(p=e(a._data).map(function(e){return e.metric_name}));for(var g=e.intersection(p,d),f=e.difference(d,p),A=e.compact(e(g).map(function(e){var n=r(e);return n?(t("#"+n.id).detach(),n):o(e)})),m=0;;m++){var v=document.getElementById("row_metric_"+m);if(!v)break;e(t("#"+v.id).children(".dashboard-cell")).each(function(t){var n=e(t.id.split("_")).last();if(!g.includes(n)){var a=r(n);a&&(a.remove(),b(n))}}),v.hasChildNodes()||v.remove()}var C=A.concat(e(f).map(o)),y=function(e){e&&document.getElementById("layout1").appendChild(e)};e(C).each(function(e){var n=c();if(t("#"+n.id).children(".dashboard-cell.dashboard-layout-panel").length<2)s(n,e),t("#"+n.id).children(".dashboard-cell.dashboard-layout-panel").css({width:"100%"}),2==t("#"+n.id).children(".dashboard-cell.dashboard-layout-panel").length&&t("#"+n.id).children(".dashboard-cell.dashboard-layout-panel").css({width:"50%"});else{var a=l(x);x+=1,y(a),s(a,e),t("#"+a.id).children(".dashboard-cell.dashboard-layout-panel").css({width:"100%"})}})}}var y;new r({id:"search_instances",search:'`aws-description-resource("$accountId$", " $region$", "rds_instances")` | fields id engine | eval label=id | sort label',earliest_time:"-7d",latest_time:"now",auto_cancel:90,preview:!0,runWhenTimeIsUndefined:!1},{tokens:!0});var w=new l({label:p.gettext("RDS Instances"),value:"$form.dimensionFilter$",choices:[{label:"All",value:"*"}],managerid:"search_instances",valueField:"id",labelField:"label",prefix:"(",valuePrefix:'metric_dimensions="DBInstanceIdentifier=[',valueSuffix:']"',delimiter:" OR ",suffix:")",searchWhenChanged:!0,handleValueChange:!0,default:"*",el:t("#input_rds_instances")},{tokens:!0});w.on("change",function(e){v(e,this)}),w.on("datachange",function(){v(this.val(),this)}),w.render();var E={CPUUtilization:{viewOptions:{"charting.axisTitleY.text":"%"}},FreeableMemory:{splAgg:"eval(round(avg(Average) / 1024 / 1024, 2))",viewOptions:{"charting.axisTitleY.text":"MB"}},NetworkTransmitThroughput:{splAgg:"eval(round(avg(Average) / 1024, 2))",viewOptions:{"charting.axisTitleY.text":"KB/Second"}},NetworkReceiveThroughput:{splAgg:"eval(round(avg(Average) / 1024, 2))",viewOptions:{"charting.axisTitleY.text":"KB/Second"}},FreeStorageSpace:{splAgg:"eval(round(avg(Average) / 1024 / 1024, 2))",viewOptions:{"charting.axisTitleY.text":"MB"}},SwapUsage:{splAgg:"eval(round(avg(Average) / 1024 / 1024, 2))",viewOptions:{"charting.axisTitleY.text":"MB"}},ReadIOPS:{viewOptions:{"charting.axisTitleY.text":"Count/Second"}},ReadLatency:{viewOptions:{"charting.axisTitleY.text":"Seconds"}},ReadThroughput:{splAgg:"eval(round(avg(Average) / 1024, 2))",viewOptions:{"charting.axisTitleY.text":"KB/Second"}},WriteIOPS:{viewOptions:{"charting.axisTitleY.text":"Count/Second"}},WriteLatency:{viewOptions:{"charting.axisTitleY.text":"Seconds"}},WriteThroughput:{splAgg:"eval(round(avg(Average) / 1024, 2))",viewOptions:{"charting.axisTitleY.text":"KB/Second"}},TransactionLogsDiskUsage:{label:"Transaction Logs Disk Usage (PostgreSQL)",splAgg:"eval(round(avg(Average) / 1024 / 1024, 2))",viewOptions:{tokenDependencies:{depends:"$postgres$"},"charting.axisTitleY.text":"MB"}},OldestReplicationSlotLag:{label:"Oldest Replication Slot Lag (PostgreSQL)",viewOptions:{tokenDependencies:{depends:"$postgres$"}}},BinLogDiskUsage:{label:"Bin Log Disk Usage (MySQL)",splAgg:"eval(round(avg(Average) / 1024 / 1024, 2))",viewOptions:{tokenDependencies:{depends:"$mysql$"},"charting.axisTitleY.text":"MB"}}},x=0;new r({id:"search_metric_names",search:"`aws-cloudwatch-rds($accountId$, $region$)` $dimensionFilter$ | fields metric_name | dedup metric_name | sort metric_name",earliest_time:"$earliest$",latest_time:"$latest$",auto_cancel:90,preview:!1,runWhenTimeIsUndefined:!1},{tokens:!0});var B=new s({label:p.gettext("Metrics"),managerid:"search_metric_names",valueField:"metric_name",labelField:"metric_name",choices:[{label:"All",value:"*"}],el:t("#input_metric_names"),width:"100%"},{tokens:!0});B.on("create:visualization",function(){this.visualization.val=d.multiSelectVal}),B.on("change",function(){C(this.visualization)}),B.on("datachange",function(){var t=this.visualization;if(!this.hasValue()||e.isEmpty(this.val())){var n=["CPUUtilization","FreeableMemory","FreeStorageSpace","SwapUsage","ReadIOPS","WriteIOPS","ReadLatency","WriteLatency"],a=e(t._data).map(function(e){return e.metric_name});this.val(e.intersection(n,a))}else C(t)}),B.render();var I=document.getElementsByClassName("btn edit-btn");I.length>0&&(I[0].onclick=function(){h()});var k={aurora:"Aurora",mysql:"MySQL",mariadb:"MariaDB",postgres:"PostgreSQL","oracle-se":"Oracle SE","oracle-ee":"Oracle EE","oracle-se1":"Oracle SE One","oracle-se2":"Oracle SE Two","sqlserver-se":"SQL Server SE","sqlserver-ee":"SQL Server EE","sqlserver-ex":"SQL Server Express","sqlserver-web":"SQL Server Web"},R="case("+e(k).map(function(e,t){return'engine="'+t+'", "'+e+'"'}).join(",")+")",O='`aws-description-resource("$accountId$", " $region$", "rds_instances")` | search $rdsIdFilter$ | eval Engine = '+R+' . "-" . engine_version, DBName = if(DBName = "null", "", DBName), multi_az = if(multi_az = "true", "Yes", "No"), create_time=if(create_time="null", "", create_time)| table Engine, id, DBName, status, allocated_storage, instance_class, availability_zone, multi_az, create_time| rename id as "DB Instance", DBName as "DB Name", status as "Status", instance_class as "Class", allocated_storage as "Allocated Storage (GB)", availability_zone as "Availability Zone", multi_az as "Multi-AZ", create_time as "Created Time"';new r({id:"search_instances_list",search:O,earliest_time:"-7d",latest_time:"now",auto_cancel:90,preview:!0,runWhenTimeIsUndefined:!1},{tokens:!0});var S=new o({title:p.gettext("RDS Instance Details"),count:10,dataOverlayMode:"none",drilldown:"row",rowNumbers:!1,wrap:!1,managerid:"search_instances_list",el:t("#table_rds_instance_details")},{tokens:!0});S.on("create:visualization",function(){S.visualization.addRowExpansionRenderer(new u({accountToken:"$accountId$",regionToken:"$region$"}))}),S.render()}.apply(t,a),!(void 0!==i&&(e.exports=i))},,function(t,n){t.exports=e},,function(e,n){e.exports=t},function(e,t){e.exports=n},,function(e,t){e.exports=a},,,,,,,,,,,,,,,,,function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var a={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(a[r]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&a[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(e,t,n){function a(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=h[a.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](a.parts[r]);for(;r<a.parts.length;r++)i.parts.push(c(a.parts[r],t))}else{for(var o=[],r=0;r<a.parts.length;r++)o.push(c(a.parts[r],t));h[a.id]={id:a.id,refs:1,parts:o}}}}function i(e){for(var t=[],n={},a=0;a<e.length;a++){var i=e[a],r=i[0],o=i[1],s=i[2],l=i[3],c={css:o,media:s,sourceMap:l};n[r]?n[r].parts.push(c):t.push(n[r]={id:r,parts:[c]})}return t}function r(e,t){var n=A(),a=_[_.length-1];if("top"===e.insertAt)a?a.nextSibling?n.insertBefore(t,a.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var n,a,i;if(t.singleton){var r=v++;n=m||(m=s(t)),a=u.bind(null,n,r,!1),i=u.bind(null,n,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),a=p.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),a=d.bind(null,n),i=function(){o(n)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}function u(e,t,n,a){var i=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var r=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function d(e,t){var n=t.css,a=t.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t){var n=t.css,a=t.sourceMap;a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([n],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var h={},g=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},f=g(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),A=g(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,v=0,_=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=f()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=i(e);return a(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var s=n[o],l=h[s.id];l.refs--,r.push(l)}if(e){var c=i(e);a(c,t)}for(var o=0;o<r.length;o++){var l=r[o];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete h[l.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},,,,function(e,t){e.exports=i},,,function(e,t,n){var a,i;a=[n(4),n(7),n(33)],i=function(e,t,n){"use strict";var a=t.utils,i=a.getPageInfo().app,r=1e4;return{search:function(t,a,o){a||(a={});var s,l=o?{tokens:!0}:null,c=$.Deferred(),u=new n($.extend({id:e.uniqueId("adhoc"),search:t,preview:!1,app:i,count:r,offset:0},a),l);return u.once("search:done",function(){s=u.data(a.data||"results",{output_mode:"json",count:r}),s.once("data",function(){c.resolve(s.data().results)}),s.once("error",c.reject),s.fetch()}),u.once("search:error search:fail search:cancelled",c.reject),c.always(function(){s&&s.destroy(),u.cancel()}).promise()}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=r},function(e,t,n){var a,i;a=[n(4),n(7),n(35),n(2),n(37)],i=function(e,t,n,a,i){"use strict";var r=t.utils,o=t.BaseModel,s=t.BaseView,l=t.splunkd_utils,c=r.getPageInfo().app,u=r.getPageInfo().page,d=s.extend({initialize:function(){s.prototype.initialize.apply(this,arguments),this.model=new o({messages:{}}),this.listenTo(this.model,"change",this.render)},events:{"click .hide-messages":"hideMessages"},setMessage:function(t,n,a,i){if("string"==typeof t&&t.length>0){var r=e.clone(this.model.get("messages"));r[t]={body:n,helpLink:a,type:i||"warning"},this.model.set("messages",r)}},unsetMessage:function(t){if("string"==typeof t&&t.length>0){var n=e.clone(this.model.get("messages"));delete n[t],this.model.set("messages",n)}else if("[object Array]"===Object.prototype.toString.call(t)){for(var a=e.clone(this.model.get("messages")),i=0;i<t.length;i++){var r=t[i];delete a[r]}this.model.set("messages",a)}},clearAllMessages:function(t){var n=e.clone(this.model.get("messages"));Object.keys(n).forEach(function(e){n[e].type===t&&delete n[e]}),this.model.set("messages",n)},render:function(){var t=this.model.get("messages"),a=!1;if(Object.keys(t).length>0){var i="";for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];a|="warning"===o.type;var s="";o.helpLink&&(s=n.buildLinkNode(o.helpLink));var l="warning"===o.type?"alert-warning":"info"===o.type?"alert-info":"alert-error",c=e.template(this.template,{warningClassName:l,messageBody:o.body,helpLink:s});i+=c}""!==i&&a&&(i+='<a class="hide-messages">Hide Messages</a>'),this.$el.html(i)}else this.$el.html("");return this},hideMessages:function(){var e=this,t=l.fullpath("saas-aws/splunk_app_aws_warning_message",{app:c,sharing:"app"});$.ajax({url:t+"/"+u+"?output_mode=json",type:"delete",success:function(){e.clearAllMessages("warning")}})},template:'\t            <div class="sourcetype-checker alert <%=warningClassName %>">\t                <i class="icon-alert"></i><%= messageBody %></span> \t                <%= helpLink %> \t            </div> \t        '}),p=$(".dashboard-body .fieldset:eq(0)"),h=$('<div id="message-view"></div>');h.insertAfter(p);var g=new d({el:h});return g}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(36)],i=function(e,t){var n="splunk_app_aws",a="6.0.3",i=encodeURIComponent("["+n+":"+a+"]");return{buildLinkNode:function(e,n){return n=n||t.gettext("Learn more"),"<a class='external' target='_blank' href='/help?location="+i+e+"'>"+n+"</a>"}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t){"use strict";function n(){return o.apply(void 0,arguments)}function a(){return o.apply(void 0,arguments)}function i(e){o=e}function r(){i("undefined"!=typeof window&&window.gettext||function(e){return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.gettext=n,t._=a,t.setSharedTranslator=i,t.resetSharedTranslator=r;var o;r()},function(e,t,n){var a;a=function(){return{AWS_RECOMMENDATION_DEPENDENCY:"aws.recommendation.dependency",AWS_DASHBOARD_SOURCETYPECHECKER:"aws.dashboard.sourcetypechecker",AWS_BILLING_TAGS:"aws.billing.tags",AWS_RECOMMENDATION_SECURITYGROUP:"aws.recommendation.securitygroup",AWS_RECOMMENDATION_ELB:"aws.recommendation.elb",AWS_RECOMMENDATION_EC2:"aws.recommendation.ec2",AWS_DASHBOARD_ACCOUNTNAME:"aws.dashboard.accountname",AWS_DASHBOARD_BILLINGDATAMODEL:"aws.dashboard.billingdatamodel",AWS_CUSTOM_INDEX:"aws.dashboard.customindex",AWS_DATA_FORWARDING:"aws.dashboard.dataforwarding",AWS_RI_PLANNER:"aws.dashboard.riplanner",AWS_RECOMMENDATION_EBS:"aws.dashboard.ebs",AWS_ANOMALY_DETECTION:"aws.dashboard.anomalydetection",AWS_BEFORE_UPGRADE:"beforeUpgrade",AWS_AFTER_UPGRADE:"afterUpgrade"}}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))},function(e,t,n){var a,i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a=[n(2),n(39),n(7)],i=function(e,t,n){"use strict";var a=(n.utils,n.splunkd_utils,/\$PREFIX\$/g),i="detailed_billing",o="instance_hour",s="detailed_billing_cur",l="instance_hour_cur",c='timechart sum(count) as "Instance Hours" span=1d',u='timechart sum(count) as "Instance Hours" span=1d',d='timechart span=1d sum(cost) as "Cost"',p={USD:"$",CNY:"¥",JPY:"¥",EUR:"€"},h=e.Components.getInstance("default"),g=function(e,n,a){if(h.get("disableLocalToken"))return null;h.on("change:"+n,function(t,n){void 0!==("undefined"==typeof n?"undefined":r(n))&&void 0!==n||(n="*"),localStorage.setItem(e,n)});var i=localStorage.getItem(e)||"*";h.set(e,i),new t(["$"+e+"$"],"$"+n+"$",a)};e.setFilter("currency2Symbol",function(e){if(e)return e in p?p[e]:""}),["countspl","costspl"].forEach(function(t){e.setFilter("groupby2"+t,function(e){var n="countspl"===t?c:d,a="countspl"===t?o:i;if(!(e&&e.length>0))return e;switch(e){case"none":return"by _time span=1d | "+n;case"reservation":return"by _time "+o+'.ReservedInstance span=1d | eval Reserved=if(\'instance_hour.ReservedInstance\'="Y", count, 0) | eval count=if(\'instance_hour.ReservedInstance\'="N", count, 0) | fields _time count Reserved | timechart sum(count) as "On-demand" sum(Reserved) as Reserved span=1d';default:return"by _time "+a+"."+e+" span=1d | eval "+a+"."+e+"=if('"+a+"."+e+'\'=="", "No Value", \''+a+"."+e+"') | "+n+" by "+a+"."+e}}),e.setFilter("curgroupby2"+t,function(e){var n="countspl"===t?u:d,a="countspl"===t?l:s;if(!(e&&e.length>0))return e;switch(e){case"none":return"by _time span=1d | "+n;case"reservation":return"by _time "+l+'.ReservedInstance span=1d | eval Reserved=if(\'instance_hour_cur.ReservedInstance\'="Y", count, 0) | eval count=if(\'instance_hour_cur.ReservedInstance\'="N", count, 0) | fields _time count Reserved | timechart sum(count) as "On-demand" sum(Reserved) as Reserved span=1d';default:return"by _time "+a+"."+e+" span=1d | eval "+a+"."+e+"=if('"+a+"."+e+'\'=="", "No Value", \''+a+"."+e+"') | "+n+" by "+a+"."+e}})}),e.setFilter("costbygroups",function(e){if(e&&e.length>0){var t=e.split("|"),n=t.map(function(e){return i+"."+e}).join(" "),a=t.map(function(e){return i+"."+e+" as "+e}).join(", ");return"by "+n+" | rename "+a}return e}),e.setFilter("curcostbygroups",function(e){if(e&&e.length>0){var t=e.split("|"),n=t.map(function(e){return s+"."+e}).join(" "),a=t.map(function(e){return s+"."+e+" as "+e}).join(", ");return"by "+n+" | rename "+a}return e});var f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" OR ";return function(i){if(i&&i.length>0){var r=i.split(n).map(e).join(a);return t(r)}return i}};return e.setFilter("id2InstanceId",f(function(e){return'metric_dimensions="InstanceId=['+e+']"'},function(e){return"("+e+")"})),e.setFilter("id2VolumeId",f(function(e){return'metric_dimensions="VolumeId=['+e+']"'},function(e){return"("+e+")"})),e.setFilter("id2description",f(function(e){return'id="'+e+'"'},function(e){return"("+e+")"})),["tag2description","tag2config"].forEach(function(t){e.setFilter(t,f(function(e){return e.replace(a,"tags.")},function(e){return"|search "+e},"||"," AND "))}),e.setFilter("tag2notification",f(function(e){return e.replace(a,"configurationItem.tags.")},function(e){return"|search "+e},"||"," AND ")),e.setFilter("tag2billing",f(function(e){return e=e.replace(a,"user:"),'"'+e+'"'},function(e){return"|search "+e},"||"," AND ")),e.setFilter("tag2detailed_billing",f(function(e){return e=e.replace(a,"detailed_billing.")},function(e){return e},"||"," AND ")),e.setFilter("tag2detailed_billing_cur",f(function(e){return e=e.replace(a,"detailed_billing_cur.")},function(e){return e},"||"," AND ")),e.setFilter("tag2instance_hour",f(function(e){return e=e.replace(a,"instance_hour.")},function(e){return e},"||"," AND ")),e.setFilter("tag2instance_hour_cur",f(function(e){return e=e.replace(a,"instance_hour_cur.")},function(e){return e},"||"," AND ")),e.setFilter("tag2topology",function(e){if(e&&e.length>0){for(var t=e.split(" OR "),n='| fillnull value="" tags | search ',i=0;i<t.length;i++){var r=t[i].replace(a,""),o=r.split("="),s=o[0],l=o[1],c=!1,u=!1;if("NOT"===s.substr(0,3)?(u=!0,s=s.substr(4)):"*"===l[1]&&"*"===l[l.length-2]&&(c=!0),l=l.substring(1,l.length-1),c)l=l.substring(1,l.length-1),n+='tags="\\S*'+s+",\\S*"+l+'\\S*"';else if(u)n+='tags="^(?!.*'+s+',)"';else{var d=r.split("=");if(r.search("AND")==-1&&(n+='(tags="*'+d[0]+","+d[1].slice(1,d[1].length-1)+'*")'),r.search("AND")!=-1)for(var p=r.split(" AND "),h=0;h<p.length;h++){var g=p[h].split("=");n+='(tags="*'+g[0]+","+g[1].slice(1,g[1].length-1)+'*")',h!=p.length-1&&(n+=" AND ")}}i!=t.length-1&&(n+=" OR ")}return n}return e}),{createLocalStorageToken:g,resetTokenValue:function(e,t,n){h.on("change:"+e,function(){h.set(t,n)})}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=o},,,,,,,,,function(e,t,n){var a,i;a=[n(4),n(2),n(7),n(49),n(50),n(51),n(61),n(62),n(64),n(65),n(66),n(38),n(52),n(68),n(39),n(59),n(32),n(54),n(69),n(72),n(76),n(53)],i=function(e,t,n,a,i,r,o,s,l,c,u,d,p,h,g,f,A,m,v){"use strict";var _=n.utils,b=n.splunkd_utils;A.search("|inputlookup instance_type",{earliest_time:"-1d"}).then(function(e){0==e.length&&A.search("|checkinstancetype",{earliest_time:"-1d"}).then(function(e){e.length>0&&location.reload()},function(e){console.log(e)})},function(e){console.log(e)}),d.createLocalStorageToken("localAccountId","form.accountId",function(e){return e?e.split(","):g.NO_CHANGE}),d.createLocalStorageToken("localRegions","form.region",function(e){return e?e.split(","):g.NO_CHANGE});var C=t.Components.get("default");h.setRestrictedSearchTermToken();var y=_.getPageInfo().page,w=_.getPageInfo().app,E=t.createService(),x=E.configurations({owner:"nobody",app:"splunk_app_aws"});x.fetch(function(e,t){var n=t.item("app");n.fetch(function(e,t){for(var n=t.properties(),a=0;a<n.entry.length;a++){var i=n.entry[a].name;if("upgrade"==i){var r=n.entry[a].content.status;if("0"==r){var o=new v;o.render_info_view(),o.showUpgradeInfo()}}}})}),a.showWarning();var B=$("#awstags");if(B.length>0){new o({el:B}).render();var I=C.get("tags");I||C.set("tags","")}Object.keys(t.Components.attributes).forEach(function(n){var a=t.Components.get(n);if("undefined"!=typeof a.getVisualizationType){var i=a.getVisualizationType();"table"===i||"statistics"===i?(a.getVisualization(function(e){e.table.addCellRenderer(new s),e.table.render()}),a.getVisualization(function(e){e.table.addCellRenderer(new l),e.table.render()}),a.getVisualization(function(e){e.table.addCellRenderer(new c),e.table.render()})):"single"!==i&&"visualizations:singlevalue"!==i||a.getVisualization(function(t){var n=$("<div></div>").insertAfter(t.$el);new u($.extend(t.settings.toJSON(),{el:n,id:e.uniqueId("single")}))})}}),f.loadContext().done(function(){var e=b.fullpath("saas-aws/splunk_app_aws_warning_message",{app:w,sharing:"app"}),t=function(){new r,i.checkCustomIndex(f.contextData.IS_AWS_ADMIN)};$.get(e+"?output_mode=json").done(function(e){var n=e.entry[0].content.pages;n.indexOf(y)===-1&&t()}).fail(function(){t()})});var k=new m;k.fetch({data:{count:-1}}).done(function(){var e=t.Components.getInstance("submitted");e.set("recommendationEnabled",!0)})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(2),n(7),n(34),n(37)],i=function(e,t,n,a,i){var r=n.utils,o={iam:["ACCELERATION_REPORT"],key_pairs:["ACCELERATION_REPORT"],network_acls:["ACCELERATION_REPORT"],security_groups:["ACCELERATION_REPORT"],security_overview:["ACCELERATION_REPORT"],user_activity:["ACCELERATION_REPORT"],vpcs:["ACCELERATION_REPORT"],RI_planner:["RI_PLANNER_PRICE_INFO"],RI_planner_cur:["RI_PLANNER_PRICE_INFO"]},s={ACCELERATION_REPORT:{source:"report acceleration hint",body:"It may take a long time to return search results in the current panel due to pending report acceleration.",helpLink:null},RI_PLANNER_PRICE_INFO:{source:"riPrice",body:'To keep the prices of EC2 instances up-to-date, use this search command: "| rirecommendation info".',helpLink:null}},l=r.getPageInfo().page;return{showWarning:function(){e.isUndefined(o[l])||o[l].forEach(function(e){var t=s[e];a.setMessage(t.source,t.body,t.helpLink,t.type||"info")})}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(2),n(7),n(33),n(34),n(37)],i=function(e,t,n,a,i,r){var o=n.utils,s={topology:["aws_topology_history","aws_topology_daily_snapshot","aws_topology_monthly_snapshot","aws_topology_playback"],vpc_flow_logs_security:["aws_vpc_flow_logs"],vpc_flow_logs_traffic:["aws_vpc_flow_logs"],insights_overview:["aws_anomaly_detection"],billing_anomaly_detection_insights:["aws_anomaly_detection"],security_anomaly_detection_insights:["aws_anomaly_detection"]},l=t.createService({owner:"nobody",app:o.getCurrentApp()}),c=o.getPageInfo().page;return{checkCustomIndex:function(t){var n=this;e.isUndefined(s[c])||l.request("server/info","GET").done(function(e){var a=JSON.parse(e).entry[0].content,i=a.server_roles,r=a.isForwarding,o=a.host;i.indexOf("search_head")===-1?n._checkOnSingleInstance():r?n._checkOnDistributedEnv(t,o):n._showForwardingWarning()})},_checkOnSingleInstance:function(){var t=this,n=s[c];l.request("data/indexes","GET").done(function(a){var i=e.pluck(JSON.parse(a).entry,"name"),r=e.difference(n,i);r.length>0&&t._showIndexWarning(r)})},_checkOnDistributedEnv:function(t,n){var i=this,r=s[c],o=new a({id:e.uniqueId(),earliest_time:"-6h",latest_time:"now",search:"index="+r[0]+" | head 1"});o.on("search:done",function(o){if(0===o.content.resultCount)if(t){var s=new a({id:e.uniqueId(),earliest_time:"-1h@h",latest_time:"now",search:'index=_internal source=*splunkd.log log_level=WARN component=IndexerService message="*'+n+'*" message="Received event for unconfigured/disabled/deleted index='+r[0]+'*"'});s.on("search:done",function(e){e.content.resultCount>0&&i._showIndexWarning(r)})}else i._showIndexWarning(r)})},_showIndexWarning:function(e){var t="Some panels may not be displayed correctly because you do not have created the following indexes: "+e.join(", ")+", or, data of these indexes have not been generated.";i.setMessage("customIndexChecker",t,r.AWS_CUSTOM_INDEX)},_showForwardingWarning:function(){var e="Some panels may not be displayed correctly. Configure this search head to forward data directly to the indexer layer.";i.setMessage("customIndexChecker",e,r.AWS_DATA_FORWARDING)}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(7),n(52),n(34),n(54),n(58),n(32),n(59),n(37)],i=function(e,t,n,a,i,r,o,s,l){"use strict";var c=t.BaseModel,u=t.BaseView,d=u.extend({initialize:function(){var t=this;u.prototype.initialize.apply(this,arguments),this.model=new c({inputs:[],recommendation:null}),this.instance_type="",o.search("|inputlookup instance_type",{earliest_time:"-1d"}).then(function(e){0!=e.length&&"on-prem"==e[0].value&&(t.instance_type="on-prem")},function(e){console.log("Received an error during verification of Instance type"+e)}),this.cachedSourcetypes=null,this.cachedRecommendation=null,this.messageView=a,this._getInputsOnce=e.once(this._getInputs),
this._getRecommendationOnce=e.once(this._getRecommendation),this.listenTo(n,"change:sourcetype",function(e){t._getInputsOnce(),t._verifyInputs(t.cachedSourcetypes,e)}),this.listenTo(n,"change:recommendation",function(e){e&&(t._getRecommendationOnce(),t._verifyRecommendation(t.cachedRecommendation))}),this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.get("inputs"),t=this.model.get("recommendation");if(e&&e.length>0){var n="Some panels may not be displayed correctly because the following inputs have not been configured: "+e.join(", ")+'.<br/>Or, the saved search "Addon Metadata - Summarize AWS Inputs" is not enabled on Add-on instance.';this.messageView.setMessage("sourcetypeChecker",n,l.AWS_DASHBOARD_SOURCETYPECHECKER)}if(t){var a="Some panels in this dashboard may not be displayed correctly. ";t.indexOf("ML lib does not exist")>=0&&"on-prem"==this.instance_type?(a+='The App "Python for Scientific Computing" is not installed or incorrectly configured.',this.messageView.setMessage("recommendation",a,l.AWS_RECOMMENDATION_DEPENDENCY)):t.indexOf("AWS Admin Validation Failed")>=0?(a+="Only AWS admin can visit the insights.",this.messageView.setMessage("recommendation",a,l.AWS_RECOMMENDATION_DEPENDENCY)):t.indexOf("Not supported in Splunk Light")>=0&&(a+="It is not supported in Splunk Light.",this.messageView.setMessage("recommendation",a,l.AWS_RECOMMENDATION_DEPENDENCY))}return this},_getInputs:function(){var t=this;o.search("`aws-input-summary` | dedup input_sourcetype | fields input_sourcetype",{earliest_time:"-1d"}).then(function(n){n&&n.length>0?t.cachedSourcetypes=e.pluck(n,"input_sourcetype").reduce(function(e,t){return e[r.findInputBySourcetype(t)]=!0,e},{}):t.cachedSourcetypes=[]})},_getRecommendation:function(){var e=this,t=new i;t.fetch({data:{count:-1}}).catch(function(t){e.cachedRecommendation=t})},_verifyInputs:function(e,t){if(e){var n=t.map(function(t){return t=r.findInputBySourcetype(t),t in e?null:t}).filter(function(e){return!!e});this.model.set("inputs",n)}},_verifyRecommendation:function(e){e&&e.responseText&&this.model.set("recommendation",e.responseText)}});return d}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(5),n(2),n(33),n(53)],i=function(e,t,n,a){"use strict";function i(){return Object.keys(n.Components.attributes).map(function(e){var t=n.Components.get(e),i=null;return t instanceof a?i=t:t.manager&&t.manager instanceof a&&(i=t.manager),i}).filter(function(e){return null!==e})}function r(e){return e.indexOf("services/saas-aws/splunk_app_aws_recommendation")>-1}function o(){var e=i(),t=!1,n=e.map(function(e){return e.has("data")?e.get("data").eventSearch+e.get("data").reportSearch:null}).filter(function(e){return!!e}).map(function(e){!t&&r(e)&&(t=!0);var n=[],a=e.match(l);a&&(n=a.map(function(e){var t=l.exec(e);return t&&t.length>1?t[1]:null}).filter(function(e){return null!==e}));for(var i in s){var o=new RegExp("\\b"+i+"\\b","g");o.test(e)&&n.push(s[i])}return n}).reduce(function(e,t){return t.forEach(function(t){e[t]=!0}),e},{});t&&u.trigger("change:recommendation",!0),u.trigger("change:sourcetype",Object.keys(n))}var s={aws_topology_daily_snapshot:"aws:config","services/saas-aws/splunk_app_aws_recommendation":"aws:cloudwatch","datamodel=Detailed_Billing":"aws:billing","datamodel=Instance_Hour":"aws:billing","datamodel=Detailed_Billing_CUR":"aws:billing:cur","datamodel=Instance_Hour_CUR":"aws:billing:cur","datamodel S3_Access_Log":"aws:s3:accesslogs","datamodel CloudFront_Access_Log":"aws:cloudfront:accesslogs"},l=/sourcetype\s*=[\s'"]*(aws:.+?)[\s'"]{1}/g,c=4e3,u=e.extend(t.Events);return setInterval(o,c),u}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=s},function(e,t,n){var a,i;a=[n(55),n(56)],i=function(e,t){return e.extend({url:"saas-aws/splunk_app_aws_recommendation",model:t,initialize:function(){e.prototype.initialize.apply(this,arguments)}})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(7)],i=function(e){var t=e.SplunkDsBaseCollection;return t.extend({fetch:function(){var e=this,n=t.prototype.fetch.apply(this,arguments);return n.done(function(){e._fetched=!0}),n},isFetched:function(){return this._fetched===!0}})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(57)],i=function(e,t){return t.extend({url:"saas-aws/splunk_app_aws_recommendation",urlRoot:"saas-aws/splunk_app_aws_recommendation",initialize:function(){t.prototype.initialize.apply(this,arguments)},getAttributeNames:function(){return["status","action","resourceId"]},parse:function(e){return e.entry[0].content}})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(5),n(7)],i=function(e,t,n){var a=n.SplunkDBase,i=n.splunkd_utils,r=function(t,n){var a=e.isFunction(t.url)?t.url():t.url;t.id&&(a=t.id);var r={};return n.data&&(r=$.extend(r,{app:n.data.app||void 0,owner:n.data.owner||void 0,sharing:n.data.sharing||void 0})),a=i.fullpath(a,r),a+="?output_mode="+encodeURIComponent("json"),n.data&&n.data.target&&(a+="&target="+encodeURIComponent(n.data.target)),n.data&&n.data.aws_service&&(a+="&aws_service="+encodeURIComponent(n.data.aws_service)),a},o=function(e){delete e.data.app,delete e.data.owner,delete e.data.sharing,delete e.data.output_mode,delete e.data.target,delete e.data.aws_service,delete e.data.count},s=function(e,n){var a,s=$.Deferred(),l={data:{}};return l.url=r(e,n),l.processData=!0,$.extend(!0,l.data,e.includeListAttributes()),$.extend(!0,l,n),o(l),l.data=i.normalizeValuesForPOST(l.data),a=t.sync.call(null,"create",e,l),a.done(function(){s.resolve.apply(s,arguments)}),a.fail(function(){s.reject.apply(s,arguments)}),s.promise()},l=function(e,n){var a,s=$.Deferred(),l={data:{}};l.url=r(e,n),l.processData=!0;var c=$.extend(!0,{},n);return $.extend(!0,l.data,e.includeListAttributes(c)),$.extend(!0,l,n),o(l),l.processData=!0,l.type="POST",l.data=i.normalizeValuesForPOST(l.data),a=t.sync.call(null,"update",e,l),a.done(function(){s.resolve.apply(s,arguments)}),a.fail(function(){s.reject.apply(s,arguments)}),s.promise()},c=function(e,n){var a,s=$.Deferred(),l={data:{}};l.url=r(e,n),$.extend(!0,l.data,n.attrs&&e.includeListPassedInAttributes(n.attrs)||{}),delete n.attrs,$.extend(!0,l,n),o(l),l.processData=!0,l.type="POST",l.url=url,l.data=i.normalizeValuesForPOST(l.data),a=t.sync.call(null,"update",e,l),a.done(function(){s.resolve.apply(s,arguments)}),a.fail(function(){s.reject.apply(s,arguments)})},u=function(e,n){var a,i=$.Deferred(),s={data:{}};return s.url=r(e,n),$.extend(!0,s,n),o(s),s.processData=!0,a=t.sync.call(this,"delete",e,s),a.done(function(){i.resolve.apply(i,arguments)}),a.fail(function(){i.reject.apply(i,arguments)}),i.promise()};return a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments)},getAttributeNames:function(){return[]},sync:function(e,t,n){switch(e){case"create":return s.call(this,t,n);case"update":return l.call(this,t,n);case"patch":return c.call(this,t,n);case"delete":return u.call(this,t,n);default:return a.prototype.sync.apply(this,arguments)}},includeListAttributes:function(t){var n=this.getAttributeNames(),a=this.splunkDWhiteList.get("wildcard")||[],i=this.entry.content.filterByKeys(n,{allowEmpty:!0},t);return e.extend(i,this.entry.content.filterByWildcards(a,{allowEmpty:!0},t))},fetch:function(){var e=this,t=a.prototype.fetch.apply(this,arguments);return t.done(function(){e._fetched=!0}),t},isFetched:function(){return this._fetched===!0}})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[],i=function(){"use strict";var e={"aws:cloudtrail":"CloudTrail","aws:config":"Config","aws:config:notification":"Config","aws:billing":"Billing (Legacy)","aws:billing:cur":"Billing (Cost and Usage Report)","aws:inspector":"Inspector","aws:config:rule":"Config Rule","aws:cloudwatch":"CloudWatch","aws:cloudfront:accesslogs":"CloudFront Access Logs","aws:elb:accesslogs":"ELB Access Logs","aws:s3:accesslogs":"S3 Access Logs","aws:description":"Description","aws:cloudwatchlogs:vpcflow":"VPC Flow Logs"};return{findInputBySourcetype:function(t){return e[t]}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(60)],i=function(e,t){var n={APP:"splunk_app_aws",OWNER:"nobody",ROLES:[],CAPABILITIES:[],IS_ADMIN:!1,IS_AWS_ADMIN:!1},a={config:"AWS Config","config-rule":"Config Rules",cloudwatch:"CloudWatch",cloudtrail:"CloudTrail",billing:"Billing",s3:"S3","cloudwatch-logs":"CloudWatch Logs",kinesis:"Kinesis",inspector:"Inspector",description:"Metadata"},i=$.Deferred();return{contextData:n,loadContext:function(){var e=this;return t.getContext(function(t){e.contextData=$.extend({},n,{APP:t.app,OWNER:t.owner,ROLES:t.roles,CAPABILITIES:t.capabilities,SERVICE_READABLE_NAMES:a,IS_ADMIN:t.is_admin,IS_AWS_ADMIN:t.is_aws_admin}),i.resolve()}),i}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(29),n(4),n(7)],i=function(e,t,n){var a=n.utils,i=n.splunkd_utils,r=e.Deferred(),o=a.getPageInfo().app,s=i.fullpath("saas-aws/splunk_app_aws_current_context",{app:o,sharing:"app"});return e.get(s+"?output_mode=json").done(function(e){var t=e.entry[0].content.roles,n=e.entry[0].content.capabilities,a=e.entry[0].content.is_admin;is_aws_admin=e.entry[0].content.is_aws_admin,r.resolve({app:o,roles:t,capabilities:n,is_admin:a,is_aws_admin:is_aws_admin})}).fail(function(){r.reject()}),{getContext:function(e,t){r.done(e),r.fail(t)}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(29),n(4),n(2),n(7),n(58),n(32),n(52)],i=function(e,t,n,a,i,r,o){"use strict";function s(e,t){return{id:e,text:e,stage:t}}var l=a.BaseView,c="STAGE_KEY",u="STAGE_OPERATOR",d="STAGE_VALUE",p="STAGE_RELATION",h={Config:"| inputlookup tags_config append=t",Description:"| inputlookup tags_description append=t","Billing (Legacy)":"| `aws-billing-datamodel-tags`","Billing (Cost and Usage Report)":"| `aws-billing-datamodel-tags-cur`"},g="$PREFIX$",f=/(.*?)!?=(.*?)\s+(AND|and|OR|or)\s+/g,A=/(.*?)\s+(AND|and|OR|or)\s+/g,m=/(['"])?(.*?)\1(!?=)(.*)/,v=/(["']?)([^\1]*)(\1)(.*)/,_=n.Components.getInstance("default"),b=n.Components.getInstance("submitted"),C=[],y=null,w=["=","!="].map(function(e){return s(e,u)}),E=["AND","OR"].map(function(e){return s(e,p)}),x=l.extend({events:{"keydown input":"onKeydown","input input":"onInput","focus input":"onFocus","mouseleave .tag-autocomplete":"_hideAutocomplete","blur input":"_hideAutocomplete","click ul > li":"_onSelecting"},_loadingTemplate:t.template('<li class="tag-loading">\n                <span class="loading-img"></span>\n                <span style="font-weight: bold;">Loading</span>\n            </li>'),_onSelecting:function(t){var n=this._currentStatus,a=e(t.currentTarget).data("stage"),i=this.$("input").val();switch(a){case c:i=i.replace(new RegExp(n.key+"$"),e(t.currentTarget).text());break;case u:i+=e(t.currentTarget).text();break;case d:var r=i.lastIndexOf("=");i=i.substring(0,r+1),i+='"'+e(t.currentTarget).text()+'"';break;case p:i=i.replace(new RegExp(n.rel+"$")," "+e(t.currentTarget).text()+" ")}this.$("input").val(i).focus(),this.onInput(),a===c&&this.$(".tag-autocomplete").hide()},onKeydown:function(e){if(38===e.keyCode||40===e.keyCode){var t=this.$(".tag-autocomplete").height(),n=this.$(".tag-autocomplete").scrollTop();if(0===this.$(".tag-autocomplete > ul > li").length)return;var a=this.$(".tag-autocomplete > ul > li.active"),i=null;if(i=40===e.keyCode?0===a.length?this.$(".tag-autocomplete > ul > li").first():a.next():0===a.length?this.$(".tag-autocomplete > ul > li").last():a.prev(),a.removeClass("active"),0===i.length)return;i.addClass("active");var r=i.position().top,o=i.height(),s=r+o-t;r<0?this.$(".tag-autocomplete").scrollTop(n+r):s>0&&this.$(".tag-autocomplete").scrollTop(n+s+1),e.preventDefault()}else if(13===e.keyCode){var l=this.$(".tag-autocomplete > ul > li.active");if(0!==l.length&&this.$(".tag-autocomplete").is(":visible"))l.trigger("click");else{var c=this.$("input").val(),u="";if(""!==c.trim()){for(var d=void 0;null!==(d=A.exec(c));){var p=this._processTerm(d[1]);u+=p+" "+d[2]+" "}u+=this._processTerm(c.replace(A,""))}_.set("tags",u),_&&b&&b.set(_.toJSON())}}},_processTerm:function(e){var t=m.exec(e);return 5===t.length?(t[2]=g+t[2],t[1]||(t[1]=""),""+t[1]+t[2]+t[1]+t[3]+t[4]):""},onInput:function(){var e=this.$("input").val().replace(f,""),t=this._detectStatus(e);this._handleStatus(t),this._currentStatus=t},onFocus:function(){this._cachedKeys?this.onInput():this._fetchKeys(status.key)},_hideAutocomplete:function(){var e=this;t.delay(function(){e.$("input").is(":focus")||e.$(".tag-autocomplete").hide()},200)},_handleStatus:function(e){var t=[];switch(e.stage){case c:this._cachedKeys?(t=this._filterTokens(this._cachedKeys,e.key),this._showAutoComplete(t)):this._fetchKeys(e.key);break;case u:t=w,this._showAutoComplete(t);break;case d:this._cachedKey!==e.key?this._fetchValues(e.key,e.value):(t=this._filterTokens(this._cachedValues,e.value),this._showAutoComplete(t));break;case p:t=E,this._showAutoComplete(t)}},_showAutoComplete:function(e){var n=e.map(function(e){var n=t.escape(e.text),a=t.escape(e.stage);return'<li data-stage="'+a+'">'+n+"</li>"}).join("");this.$(".tag-autocomplete > ul").html(n),this.$(".tag-autocomplete").show()},_showLoading:function(){this.$(".tag-autocomplete > ul").html(this._loadingTemplate()),this.$(".tag-autocomplete").show()},_fetchKeys:function(e){var t=this;this._showLoading(),r.search(y+" | stats count by key | fields - count").then(function(n){t._cachedKeys=n.map(function(e){return s(e.key,c)}),0===t._cachedKeys.length&&(t._cachedKeys=null);var a=t._filterTokens(t._cachedKeys,e);t._showAutoComplete(a)},function(e){console.log(e)})},_fetchValues:function(e,t){var n=this,a="",i="`aws-billing-cur-tag-value("+e+")`",o="`aws-billing-tag-value("+e+")`";a=y.indexOf("`aws-billing-datamodel-tags`")>-1?y+" | search key=CASE("+e+") | "+o+" | search value=* | fields value":y.indexOf("`aws-billing-datamodel-tags-cur`")>-1?y+" | search key=CASE("+e+") | "+i+" | search value=* | fields value":y+" | search key=CASE("+e+") | dedup value | fields value",this._showLoading(),this._cachedKey=e,r.search(a).then(function(e){n._cachedValues=e.map(function(e){return s(e.value,d)});var a=n._filterTokens(n._cachedValues,t);n._showAutoComplete(a)},function(e){console.log(e)})},_filterTokens:function(e,t){if(!e)return[];var n=e;return t&&(n=e.filter(function(e){return e.text.toUpperCase().indexOf(t.toUpperCase())>-1&&e.text!==t})),n},_detectStatus:function(e){var t={key:null,op:null,value:null,rel:null,stage:null};e.indexOf("!=")>-1?t.op="!=":e.indexOf("=")>-1&&(t.op="=");var n=e.split(t.op);if(t.key=n[0],n.length>1){var a=n[1],i=a.match(v);i&&5===i.length?(t.value=i[2],t.rel=i[4]):t.value=a}return t.stage=this._getStage(t),t},_getStage:function(e){return e.rel?p:e.value||e.op?d:c},initialize:function(){var e=this;this._reset(),this.onInput=t.debounce(this.onInput,50),this.listenTo(o,"change:sourcetype",function(n){var a=n.map(function(e){return i.findInputBySourcetype(e)}).filter(function(e){return!!e});t.isEqual(a,C)||(C=a,y=e._generateSPL(_.get("form.accountId")||"*",a),e.$el.find("input").attr("placeholder","key=value AND|OR key2=value2").prop("disabled",!1))}),_.on("change:accountId",this._reset.bind(this))},render:function(){var e=_.get("tags");e=e?'value="'+e.replace(/\$PREFIX\$/g,"").replace(/\"/g,"&quot;")+'"':"",this.$el.html('\n                <label>Tags</label>\n                <input type="text" placeholder="loading..." disabled '+e+' />\n                <div class="tag-autocomplete"><ul></ul></div>\n            '),this.$el.show()},_reset:function(){this._cachedKeys=null,this._cachedKey=null,this._cachedValues=null,this._currentStage=c,this._currentStatus=null},_generateSPL:function(e,t){var n=t.filter(function(e){return e in h}).map(function(t){var n=h[t];return["Description","Config"].indexOf(t)>-1&&(n+="*"===e?"":" where aws_account_id="+e),n}).sort(function(e,t){return e.indexOf("`aws-billing-datamodel-tags`")>-1?-1:e.indexOf("`aws-billing-datamodel-tags-cur`")>-1?-1:t.indexOf("`aws-billing-datamodel-tags`")>-1?1:t.indexOf("`aws-billing-datamodel-tags-cur`")>-1?1:0}).join(" ");return n}});return x}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(2),n(63),n(53)],i=function(e,t,n){"use strict";var a=["Percentage"],i=n.BaseCellRenderer.extend({initialize:function(e){this.fields=a,n.BaseCellRenderer.prototype.initialize.apply(this,arguments)},canRender:function(e){return this.fields.indexOf(e.field)>-1},render:function(t,n){var a=Math.min(Math.max(parseFloat(n.value),0),100);return isNaN(a)?void t.html("N/A"):void t.addClass("data-bar-cell").html(e.template(this.template,{percent:a,cellValue:String(n.value)}))},template:'\t            <div class="data-bar-wrapper">\t                <div class="data-bar" style="width:<%- percent %>%">\t                    <div class="data-bar-custom-text">\t                        <span class="data-bar-badge"><%- cellValue %></span>\t                    </div>\t                </div>\t            </div>\t        '});return i}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=l},function(e,t,n){var a,i;a=[n(4),n(2),n(7),n(63),n(32),n(29),n(53)],i=function(e,t,n,a,i){"use strict";var r=(n.utils,["Event Name"]),o=a.BaseCellRenderer.extend({initialize:function(t){var n=this;this.valueMap=null,this.search=i.search("| inputlookup all_eventName").then(function(t){var a={};e(t).each(function(e){a[e.eventName]=e.highlight}),n.valueMap=a}),this.fields=r,a.BaseCellRenderer.prototype.initialize.apply(this,arguments)},canRender:function(e){return this.fields.indexOf(e.field)>-1},render:function(e,t){var n=this;return $.when(this.search).done(function(){e.text(t.value);var a=n.valueMap[t.value];null!==a&&e.addClass("range-"+a)}),this}});return o}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(2),n(63),n(53)],i=function(e,t,n){var a={CREATE:["range-cell","range-low"],UPDATE:["range-cell","range-elevated"],DELETE:["range-cell","range-severe"],Unauthorized:["range-cell","range-unauth","numeric"],Authorized:["range-cell","range-auth","numeric"],"Error Code":["range-cell","range-err"]},i={Direction:{ingress:["range-cell","inbound"],egress:["range-cell","outbound"]},"Instance State":{"in service":["range-cell","range-low"],"out of service":["range-cell","range-severe"],healthy:["range-cell","range-low"],unused:["range-cell","range-severe"],unhealthy:["range-cell","range-severe"],draining:["range-cell","range-severe"]}},r=Object.keys(a).concat(Object.keys(i)),o=n.BaseCellRenderer.extend({canRender:function(e){return r.indexOf(e.field)>-1},render:function(e,t){var n=t.field,r=t.value;if(n in a&&a[n].forEach(function(t){e.addClass(t)}),n in i){var o=i[n];r in o&&o[r].forEach(function(t){e.addClass(t)})}e.text(r)}});return o}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(2),n(67),n(53)],i=function(e,t,n){"use strict";var a="_total_field",i="_total_name",r="_total_prefix",o=n.extend({outputMode:"json",returnCount:2,options:{},displayMessage:function(){},createView:function(){return!0},updateView:function(t,n){var o=0,s="events",l="out of",c="",n=n[0];this.$el.empty(),e.isUndefined(n[a])?c="display: none":o=n[a],e.isUndefined(n[i])||(s=n[i]),e.isUndefined(n[r])||(l=n[r]);var u=e.template(this.template,{prefix:l,total:o,name:s,hide:c});this.$el.html(u)},template:'\t            <div class="single-total" style="<%- hide %>" title="Total value: <%- total %>">\t                <%- prefix %> <b><%- total %></b> <%- name %>\t            </div>\t        '});return o}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=c},function(e,t,n){var a,i;a=[n(4),n(2),n(7),n(53)],i=function(e,t,n){var a=n.utils,i=n.splunkd_utils,r=a.getPageInfo().app,o=a.getPageInfo().page,s={cloudfront_access_logs:{prefix:"CloudFront_Access_Log.",field:"account_id",token:"cloudfront_datamodel_restrictions"},s3_access_logs:{prefix:"S3_Access_Log.",field:"account_id",token:"s3_datamodel_restrictions"}},l=t.Components.getInstance("submitted");return{setRestrictedSearchTermToken:function(){var e=s[o];if(e){var t=i.fullpath("saas-aws/splunk_app_aws_search_restrictions",{app:r,sharing:"app"});$.ajax({url:t+"?output_mode=json&field="+e.field+"&prefix="+e.prefix,type:"get",success:function(t){var n=t.entry[0].content.search_restrictions;l.set(e.token,n)}})}}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(2),n(70),n(35),n(37),n(71)],i=function(e,t,n,a,i,r){var o=n.Modal,s='<a href="#" class="btn cancel-job pull-left">Cancel</a>',l='<a href="#" class="btn btn-primary ack-info pull-left">Acknowledge</a>',c='<a href="#" class="btn btn-primary modal-btn-primary pull-right">OK</a>',u='<a href="#" class="btn create-job pull-right">Create</a>',d=["create-alert","edit-alert","delete-alert","create-job","edit-job","delete-job","change-job-mode"];return o.extend({initialize:function(e){o.prototype.initialize.apply(this,arguments)},events:$.extend({},o.prototype.events,{"click .cancel-job":function(e){e.preventDefault(),this.hide()},"click .ack-info":function(e){e.preventDefault();var n=t.createService(),a=n.configurations({owner:"nobody",app:"splunk_app_aws"});a.fetch(function(e,t){var n=t.item("app");n.fetch(function(e,n){for(var a=n.properties(),i=0;i<a.entry.length;i++){var r=a.entry[i].name;"upgrade"==r&&t.post("app/upgrade",{status:1})}})}),this.hide()},"click a.create-alert":function(e){e.preventDefault(),this.hide(),this.trigger("createAlert",this.name)},"click a.edit-alert":function(e){e.preventDefault(),this.hide(),this.trigger("editAlert")},"click a.delete-alert":function(e){e.preventDefault(),this.hide(),this.trigger("deleteAlert",this.id,this.alert,!0)},"click a.delete-job":function(e){e.preventDefault(),this.hide(),this.trigger("deleteJob",this.id,this.alert)},"click a.edit-job":function(e){e.preventDefault(),this.hide(),this.trigger("editJob",this.name)},"click .create-job":function(e){e.preventDefault(),this.hide(),this.trigger("createJob")},"click .change-job-mode":function(e){e.preventDefault(),this.hide(),this.trigger("changeJobMode",this.id,this.mode)}}),render:function(){return this.$el.html(o.TEMPLATE),this.$(o.FOOTER_SELECTOR).append(s),this.$(o.FOOTER_SELECTOR).append(c),this.$(o.FOOTER_SELECTOR).append(u),this.$(".create-job").hide(),this},render_info_view:function(){return this.$el.html(o.TEMPLATE),this.$(o.FOOTER_SELECTOR).append(l).css("display","block"),this.$(".create-job").hide(),this},showFail:function(e,t){this._clean(),this.$(o.HEADER_TITLE_SELECTOR).html("Fail to "+t),this.$(".btn-primary").html("OK"),this.$(o.BODY_SELECTOR).html("Operations on "+e+" has been failed. Please try again."),this.show()},showAlertLoadFail:function(e){this._clean(),this.$(o.HEADER_TITLE_SELECTOR).html("Fail to load"),this.$(".btn-primary").html("Create"),this.$(".btn-primary").addClass("create-alert"),this.$(o.BODY_SELECTOR).html('Fail to load "'+e+"\" associate alert.<br>This is because alert's permission or accident deletion.\t            <br>Do you want to create another alert associate with current job ?"),this.name=e,this.show()},showJobSaveSuccess:function(e,t){this._clean();var n=(e&r.EDIT_MODE)>0?"updated":"saved",a=(t&r.EDIT_MODE)>0?"Edit Alert":"Create Alert";this.$(o.HEADER_TITLE_SELECTOR).html("Job has been "+n),this.$(".btn-primary").html(a);var i="";(t&r.EDIT_MODE)>0?(this.$(".btn-primary").addClass("edit-alert"),i+="You can continue to edit the binding alert.<br>"):(this.$(".btn-primary").addClass("create-alert"),i+="You can continue to create an alert associated with the job.<br>"),i+='If you want to receive customized email, please select action "Send email".',this.$(o.BODY_SELECTOR).html(i),this.show()},showJobDeleteConfirm:function(t,n,a){this._clean(),this.$(o.HEADER_TITLE_SELECTOR).html("Delete job"),this.$(".btn-primary").html("Delete"),this.$(".btn-primary").addClass("delete-job");var i="Are you sure you want to delete job ("+n+")";e.isEmpty(a)||(i+=" and corresponding alert ("+a.entry.get("name")+")"),i+=" ?",this.$(o.BODY_SELECTOR).html(i),this.id=t,this.alert=a,this.show()},showAlertDeleteConfirm:function(t,n,a){this._clean(),e.isEmpty(a)?this.showAlertLoadFail(n):(this.$(o.HEADER_TITLE_SELECTOR).html("Delete alert"),this.$(".btn-primary").html("Delete"),this.$(".btn-primary").addClass("delete-alert"),this.$(o.BODY_SELECTOR).html("Are you sure you want to delete alert ("+a.entry.get("name")+")?"),this.id=t,this.alert=a),this.show()},showJobModeChangeConfirm:function(e,t,n,a){this._clean(),this.$(o.HEADER_TITLE_SELECTOR).html(e+" job"),this.$(".btn-primary").html(e),this.$(".btn-primary").addClass("change-job-mode"),this.$(o.BODY_SELECTOR).html("Are you sure you want to "+e.toLowerCase()+" job("+n+") ?"),this.id=t,this.mode=a,this.show()},showJobEditConfirm:function(e){this._clean(),this.$(o.HEADER_TITLE_SELECTOR).html("Edit job"),this.$(".btn-primary").html("Edit"),this.$(".btn-primary").addClass("edit-job"),this.$(o.BODY_SELECTOR).html("Another job ("+e+") has been saved with same search. <br>Do you want to edit this job?"),this.name=e,this.show()},showUpgradeInfo:function(){this._clean(),this.$(o.HEADER_TITLE_SELECTOR).html("Information");var e=a.buildLinkNode(i.AWS_BEFORE_UPGRADE),t=a.buildLinkNode(i.AWS_AFTER_UPGRADE);this.$(o.BODY_SELECTOR).html("You installed the Splunk App for AWS version 6.0.3<br><br> Confirm you migrated the indexes for the app and disabled the required saved searches. "+e+"<br><br>Now, enable data model acceleration, schedule reports, and update the aws-data-model-acceleration search macro. "+t),this.show()},_clean:function(){this.$(".btn-primary").removeClass(d.join(" ")),this.$(".create-job").hide()}})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=u},function(e,t,n){var a,i;a=[],i=function(){return{MILLI_SEC_IN_SEC:1e3,MILLI_SEC_IN_MIN:6e4,MILLI_SEC_IN_HOUR:36e5,MILLI_SEC_IN_DAY:864e5,DAY_IN_WEEK:7,DAY_IN_MONTH:30,OUTLIER_COLOR:"#ff0000",NORMAL_COLORS:["#d6563c","#1e93c6","#f2b827","#6a5c9e","#31a35f","#3863a0","#a2cc3e","#ed8440","#cc5068","#73427f","#11a88b","#99712b","#314d5b"],ENABLE_MODE:1,DETECT_MODE:2,DISPLAY_MODE:4,HIGHLIGHT_MODE:8,CREATE_MODE:16,EDIT_MODE:32,INDEX:"summary",SOURCE_TYPE:"aws:anomaly",JOB_ID:"job_id",JOB_NAME:"job_name",JOB_PRIORITY:"job_priority",JOB_MODE:"job_mode",JOB_SCHEDULE:"job_schedule",JOB_SEARCH:"job_search",JOB_TRAIN:"job_train",JOB_TAGS:"job_tags",JOB_ALERT_ID:"job_alert_id",JOB_DESCRIPTION:"job_description",INVALID_SEVERITY_COLOR:"#333",SEVERITY_COLOR_MAP:{1:"#FCE9E5",2:"#fed1c8",3:"#fa8e81",4:"#F14E3B"},UPDATE_SCHEDULE_CHECKER_JOB_SPL:'| inputlookup anomaly_schedule_checker | where job_id!="<%= jobId %>" | outputlookup anomaly_schedule_checker',UPDATE_SCHEDULE_CHECKER_ALERT_SPL:'| inputlookup anomaly_schedule_checker | where job_id!="<%= jobId %>" OR is_alert!="1" | outputlookup anomaly_schedule_checker',DAILY_TIME_FORMAT:"YYYY-MM-DD",HOURLY_TIME_FORMAT:"YYYY-MM-DD HH:mm:ss"}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(2),n(7),n(73),n(75)],i=function(e,t,n,a,i){"use strict";var r=(n.MultiSelectView,i.list_of_ids_with_all),o=i.list_of_ids_without_all;Object.keys(t.Components.attributes).forEach(function(e){for(var n=t.Components.get(e),i=e,s=0;s<r.length;s++)i.search(r[s])!=-1&&(n.val=a.multiSelectVal_persist_all);for(var l=0;l<o.length;l++)i.search(o[l])!=-1&&(n.val=a.multiSelectVal)})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(74)],i=function(e,t){return{multiSelectVal:function(){var n=arguments[0];if(e.isArray(n)&&n.length>1){var a=n.indexOf("*");0===a?n=e.without(n,"*"):a===n.length-1&&(n=["*"]),arguments[0]=n}return t.prototype.val.apply(this,arguments)},multiSelectVal_persist_all:function(){var n=arguments[0];if(e.isArray(n)&&0==n.length&&(arguments[0]="*"),e.isArray(n)&&n.length>1){var a=n.indexOf("*");0===a?n=e.without(n,"*"):a===n.length-1&&(n=["*"]),arguments[0]=n}return t.prototype.val.apply(this,arguments)}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["ip1","ip2","ip3","region","account"],a=["input1_all","input2_all","recommendation_filter","select_severity"];t.list_of_ids_without_all=n,t.list_of_ids_with_all=a},function(e,t,n){var a=n(77);"string"==typeof a&&(a=[[e.id,a,""]]);n(25)(a,{});a.locals&&(e.exports=a.locals)},function(e,t,n){t=e.exports=n(24)(),t.push([e.id,".single-total{position:relative;text-align:center;font-size:.8vw;font-weight:200!important;line-height:.8vw;color:grey;font-family:Roboto,Droid,Helvetica Neue,Helvetica,Arial,sans-serif}td.data-bar-cell{padding:1px 8px!important}.data-bar-wrapper{background-color:#eee;box-shadow:inset 0 1px 2px rgba(0,0,0,.1);margin-bottom:4px}td.data-bar-cell .data-bar-wrapper .data-bar{min-width:1px;color:#31708f;background-color:#428bca;box-shadow:inset 0 -1px 0 rgba(0,0,0,.3);border-right:1px solid #bb401f}.data-bar-custom-text{margin-right:2px;margin-top:3px;padding-top:2px;padding-bottom:2px;text-align:right}.data-bar-badge{background-color:#fff;border:1px solid #d3d3d3;border-radius:2px;color:purple;opacity:.88;padding-left:2px;padding-right:2px}td.range-low{background-color:#dff0d8!important;color:#3c763d!important;font-weight:700}td.range-elevated{background-color:#fcf8e3!important;color:#8a6d3b!important;font-weight:700}td.range-severe{background-color:#f2dede!important;color:#a94442!important;font-weight:700}td.range-unauth{font-weight:700;color:#d9534f!important}td.range-auth{font-weight:700;color:#428bca!important}td.range-err{font-weight:700;color:orange!important}td.inbound{background-color:#d9edf7!important;border-color:#bce8f1!important;color:#31708f!important}td.inbound,td.outbound{font-weight:700!important}td.outbound{background-color:#f5e0ec!important;border-color:#bda8b3!important;color:#7e6974!important}#awstags{display:inline-block;margin-right:10px}.tag-autocomplete{position:absolute;z-index:999;border:1px solid rgba(82,168,236,.8);background-color:#fff;margin-top:-9px;width:218px;max-height:200px;overflow-y:auto;display:none}.tag-autocomplete>ul{list-style-type:none;margin:0}.tag-autocomplete>ul>li{border-top:1px dotted #ccc;color:#1e93c6;padding-left:5px;line-height:23px;cursor:pointer}.tag-autocomplete>ul>li.active,.tag-autocomplete>ul>li:hover{background-color:rgba(0,0,0,.05)}.tag-autocomplete>ul>li.tag-loading{cursor:default;color:#000}.tag-autocomplete>ul>li.tag-loading>.loading-img{width:16px;height:16px;margin-top:2px;margin-right:5px;display:block;float:left;background-image:url("+n(78)+")}.hide-messages{margin-left:30px;margin-bottom:10px;display:inline-block}.sourcetype-checker{margin-bottom:0}.slidenavList.scroll-group{max-height:350px!important}","",{version:3,sources:["/./package/appserver/static/pcss/dashboards/SingleValueRenderer.pcss","/./package/appserver/static/pcss/dashboards/TableBarRenderer.pcss","/./package/appserver/static/pcss/dashboards/TableCellRenderer.pcss","/./package/appserver/static/pcss/dashboards/TagInputView.pcss","/./package/appserver/static/pcss/dashboards/MessageView.pcss","/./package/appserver/static/pcss/dashboards/common.pcss"],names:[],mappings:"AAAA,cACI,kBAAmB,AACnB,kBAAmB,AACnB,eAAiB,AACjB,0BAA4B,AAC5B,iBAAmB,AACnB,WAAY,AACZ,kEAA0E,CAC7E,ACRD,iBACI,yBAA4B,CAC/B,AAED,kBACI,sBAA0B,AAC1B,0CAA+C,AAC/C,iBAAmB,CACtB,AAED,6CACI,cAAe,AACf,cAAe,AACf,yBAA0B,AAC1B,yCAA+C,AAC/C,8BAAgC,CACnC,AAED,sBACI,iBAAkB,AAClB,eAAgB,AAChB,gBAAiB,AACjB,mBAAoB,AACpB,gBAAkB,CACrB,AAED,gBACI,sBAAuB,AACvB,yBAA0B,AAC1B,kBAAmB,AACnB,aAAe,AACf,YAAc,AACd,iBAAkB,AAClB,iBAAmB,CACtB,AChCD,aACI,mCAAqC,AACrC,wBAA0B,AAC1B,eAAkB,CACrB,AAED,kBACI,mCAAqC,AACrC,wBAA0B,AAC1B,eAAkB,CACrB,AAED,gBACI,mCAAqC,AACrC,wBAA0B,AAC1B,eAAkB,CACrB,AAED,gBACI,gBAAkB,AAClB,uBAA0B,CAC7B,AAED,cACI,gBAAkB,AAClB,uBAA0B,CAC7B,AAED,aACI,gBAAkB,AAClB,sBAAyB,CAC5B,AAED,WACI,mCAAqC,AACrC,+BAAiC,AACjC,uBAA0B,CAE7B,AAED,uBAHI,yBAA6B,CAQhC,AALD,YACI,mCAAqC,AACrC,+BAAiC,AACjC,uBAA0B,CAE7B,AC/CD,SACI,qBAAsB,AACtB,iBAAmB,CACtB,AAED,kBACI,kBAAmB,AACnB,YAAa,AACb,qCAA0C,AAC1C,sBAAwB,AACxB,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,gBAAiB,AACjB,YAAc,CAuCjB,AAnCG,qBACI,qBAAsB,AACtB,QAAU,CAgCb,AA9BG,wBACI,2BAA4B,AAC5B,cAAe,AACf,iBAAkB,AAClB,iBAAkB,AAClB,cAAgB,CAwBnB,AAlBG,6DACI,gCAAsC,CACzC,AAED,oCACI,eAAgB,AAChB,UAAa,CAWhB,AATG,iDACI,WAAY,AACZ,YAAa,AACb,eAAgB,AAChB,iBAAkB,AAClB,cAAe,AACf,WAAY,AACZ,8CAAkD,CACrD,ACjDjB,eACI,iBAAkB,AAClB,mBAAoB,AACpB,oBAAsB,CACzB,AAED,oBACI,eAAmB,CACtB,ACFD,2BACI,0BAA4B,CAC/B",
file:"common.pcss",sourcesContent:['.single-total {\n    position: relative;\n    text-align: center;\n    font-size: 0.8vw;\n    font-weight: 200 !important;\n    line-height: 0.8vw;\n    color: grey;\n    font-family: "Roboto","Droid","Helvetica Neue",Helvetica,Arial,sans-serif;\n}',"td.data-bar-cell {\n    padding: 1px 8px !important;\n}\n\n.data-bar-wrapper {\n    background-color: #eeeeee;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) inset;\n    margin-bottom: 4px;\n}\n\ntd.data-bar-cell .data-bar-wrapper .data-bar {\n    min-width: 1px;\n    color: #31708F;\n    background-color: #428bca;\n    box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.30) inset;\n    border-right: 1px solid #bb401f;\n}\n\n.data-bar-custom-text {\n    margin-right: 2px;\n    margin-top: 3px;\n    padding-top: 2px;\n    padding-bottom: 2px;\n    text-align: right;\n}\n\n.data-bar-badge {\n    background-color: #fff;\n    border: 1px solid #d3d3d3;\n    border-radius: 2px;\n    color: #800080;\n    opacity: 0.88;\n    padding-left: 2px;\n    padding-right: 2px;\n}","/* Cell Highlighting */\n\ntd.range-low {\n    background-color: #DFF0D8 !important;\n    color: #3C763D !important;\n    font-weight: bold;\n}\n\ntd.range-elevated {\n    background-color: #FCF8E3 !important;\n    color: #8A6D3B !important;\n    font-weight: bold;\n}\n\ntd.range-severe {\n    background-color: #F2DEDE !important;\n    color: #A94442 !important;\n    font-weight: bold;\n}\n\ntd.range-unauth {\n    font-weight: bold;\n    color: #d9534f !important;\n}\n\ntd.range-auth {\n    font-weight: bold;\n    color: #428bca !important;\n}\n\ntd.range-err {\n    font-weight: bold;\n    color: orange !important;\n}\n\ntd.inbound {\n    background-color: #D9EDF7 !important;\n    border-color: #BCE8F1 !important;\n    color: #31708F !important;\n    font-weight: bold !important;\n}\n\ntd.outbound {\n    background-color: #F5E0EC !important;\n    border-color: #BDA8B3 !important;\n    color: #7E6974 !important;\n    font-weight: bold !important;\n}\n\n",'#awstags {\n    display: inline-block;\n    margin-right: 10px;\n}\n\n.tag-autocomplete {\n    position: absolute;\n    z-index: 999;\n    border: 1px solid rgba(82, 168, 236, 0.8);\n    background-color: white;\n    margin-top: -9px;\n    width: 218px;\n    max-height: 200px;\n    overflow-y: auto;\n    display: none;\n\n\n\n    > ul {\n        list-style-type: none;\n        margin: 0;\n\n        > li {\n            border-top: 1px dotted #ccc;\n            color: #1e93c6;\n            padding-left: 5px;\n            line-height: 23px;\n            cursor: pointer;\n\n            &.active {\n                background-color: rgba(0, 0, 0, 0.05);\n            }\n\n            &:hover {\n                background-color: rgba(0, 0, 0, 0.05);\n            }\n\n            &.tag-loading {\n                cursor: default;\n                color: black;\n\n                > .loading-img {\n                    width: 16px;\n                    height: 16px;\n                    margin-top: 2px;\n                    margin-right: 5px;\n                    display: block;\n                    float: left;\n                    background-image: url("../../img/loading-16.gif");\n                }\n            }\n        }\n    }\n}\n',".hide-messages {\n    margin-left: 30px;\n    margin-bottom: 10px;\n    display: inline-block;\n}\n\n.sourcetype-checker {\n    margin-bottom: 0px;\n}",'@import "./SingleValueRenderer.pcss";\n@import "./TableBarRenderer.pcss";\n@import "./TableCellRenderer.pcss";\n@import "./TagInputView.pcss";\n@import "./MessageView.pcss";\n\n.slidenavList.scroll-group{\n    max-height:350px !important;\n}'],sourceRoot:"webpack://"}])},function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAAQAPIFANLS0qmpqVhYWCAgIIKCgu7u7v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUAo/eHBhY2tldCBiACH5BAkKAAUALAAAAAAQABAAAAMiWLo1KiwuV4CUDhZyZ4FcF4VFIC6Aea4d4LpsLM90bd9MAgAh+QQJCgAGACwEAAAACwAGAAADFjhmsrRLMfNgnDVA1Za21lcA4AKQRgIAIfkECQoABQAsAgAAAAsABQAAAxRYJUoaKrYC4lDMQVoudEqlXJKYAAAh+QQJCgAFACwAAAAACwAGAAADFVhapKFgFeNkEaq9uLBeQ2cpQzgWCQAh+QQJCgAHACwAAAAACAAIAAADFnh6obCnOEVUe5QdIFaFggGNy2AOUAIAIfkECQoABgAsAAAAAAYACwAAAxVoarCuQTVoClmR3beEF5wzDMoALgkAIfkECQoABQAsAAACAAUACwAAAxJYBdocbsHWiCWUClG4Gg34KQkAIfkECQoABgAsAAAEAAYACwAAAxQItlzK0IQZYiRkkWoE9Aw4RCMzJgAh+QQJCgAGACwAAAcACAAJAAADFggK1v4vhMgMgdYUM9o1AoeJTkhCQwIAIfkECQoABQAsAAAJAAsABwAAAxdYBaCuTYVHpxJlOEsK1pThUUo3ZuRZJAAh+QQJCgAHACwCAAoACwAGAAADGHgH2tNMkWPOi+FMoZ4q2gE2RxYeHCmpCQAh+QQJCgAFACwEAAkACwAHAAADF1i6FcNMrKdCK3KBS1QuxgUVm9iN1pgAACH5BAkKAAUALAcABwAJAAkAAAMXWFrTvTAWISRRpoISyl1b54FYtHGmpCQAIfkECQoABgAsCQAEAAcACwAAAxRoqrPQK0ZBqYyFxLB0MZyjhJcYJQAh+QQFCgAFACwKAAIABgALAAADFlg1qtyviCZmu4VojZUJDdCAhYiZRQIAOw=="},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=p},,,function(e,t){e.exports=h},function(e,t){e.exports=g},function(e,t,n){var a,i;a=[n(4),n(74),n(7),n(73),n(149)],i=function(e,t,n,a,i){var r=n.FormUtils,o=n.BaseInput,s=t.extend({convertDataToChoices:function(n){n=n||this._data||[];var a=this.settings.get("valueField")||"value",i=Array.prototype.slice.call(this.settings.get("choices")||[]),r=e(i.concat(n)).reduce(function(t,n){var i=n.engine;return e.isUndefined(i)||e.isNull(i)||(t[n[a]]=i),t},{});return this.settings.set("rdsEngines",r),t.prototype.convertDataToChoices.apply(this,arguments)},_select2_with_icon:function(n,a){function r(t,n){if(t){var a=t.id,r=t.text;if(n.attr("title",r),"*"===a)return r;var s=o.settings.get("rdsEngines"),l=s[a];return e.isUndefined(l)?r:i.getLogoImg(l)+r}return t}var o=this;return a=e.extend(a||{},{formatResult:r,formatSelection:r}),t.prototype._select2.call(this,n,a)},val:a.multiSelectVal});return r.registerInputType("rds_instances_select",s,{choices:!0,multiValue:!0}),o.extend({initialVisualization:"rds_instances_select"})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(7)],i=function(e,t){var n=t.utils;return{getLogoImg:function(t){var a;switch(t=t.toLowerCase()){case"postgres":a="postgresql.png";break;case"mysql":a="mysql.svg";break;case"mariadb":a="mariadb.png";break;default:t.indexOf("oracle")>-1?a="oracle.svg":t.indexOf("sqlserver")>-1&&(a="sql_server.svg")}return e.isUndefined(a)?"":'<img class="rds_logo" src="/en-US/static/app/'+n.getCurrentApp()+"/img/logos/"+a+'"/>'}}}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(63),n(149)],i=function(e,t){return e.BaseCellRenderer.extend({initialize:function(e){e=e||{},this.fieldName=e.fieldName},canRender:function(e){return e.field===this.fieldName},setup:function(e,t){e.addClass("rds_logo").addClass(this._className(t))},render:function(e,n){e.html(t.getLogoImg(this._engineName(n))+n.value)},teardown:function(e,t){e.removeClass("rds_logo").removeClass(this._className(t))},_engineName:function(e){return e.value.split(" ",2)[0].toLowerCase()},_className:function(e){var t=this._engineName(e);return t.indexOf("oracle")>-1&&(t="oracle"),t}})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a,i;a=[n(4),n(29),n(7),n(33),n(63),n(36)],i=function(e,t,n,a,i,r){function o(e){var t=(e.data[0]||[]).length;return t>0&&(t=100/t),e.cellWidth=t+"%",h(e)}function s(e){return Math.round(100*e)/100+"%"}function l(t){if(e.isUndefined(t)||e.isEmpty(t)||e.isNull(t))return"N/A";var n=e(["","K","M","G","T","P","Z"]).find(function(){return!(t>1024)||(t/=1024,!1)});return Math.round(100*t)/100+" "+n+"B"}function c(t){if(e.isUndefined(t)||e.isEmpty(t)||e.isNull(t))return"N/A";var n="Seconds";return t>60&&(t/=60,n="Minutes"),t>60&&(t/=60,n="Hours"),t>24&&(t/=24,n="Days"),Math.round(100*t)/100+" "+n}function u(t){return e.isUndefined(t)||e.isEmpty(t)||e.isNull(t)?"N/A":Math.round(100*t)/100}function d(n,i){function d(e){v.text(r.gettext(e))}function h(){if(!m.hasData())return d("No results found");var t=e(m.data().results).reduce(function(e,t){return e[t.metric_name]=t.value,e},{}),n=u(t.ReadIOPS),a=u(t.WriteIOPS),i=c(t.ReadLatency),p=c(t.WriteLatency),h=l(t.ReadThroughput),g=l(t.WriteThroughput),f="N/A"===n||"N/A"===a?"N/A":n+" / "+a+" per Second",A="N/A"===i||"N/A"===p?"N/A":i+" / "+p,_="N/A"===h||"N/A"===g?"N/A":h+" / "+g+" per Second";v.html(o({caption:r.gettext("Current Metrics"),data:[[{label:"CPU Utilization",value:s(t.CPUUtilization)},{label:"Freeable Memory",value:l(t.FreeableMemory)},{label:"Free Storage Space",value:l(t.FreeStorageSpace)}],[{label:"IOPS (Read/Write)",value:f},{label:"Latency (Read/Write)",value:A},{label:"Throughput (Read/Write)",value:_}]]}))}var g=this._instanceId(i),f=e(p).map(function(e){return'metric_name="'+e+'"'}).join(" OR "),A=new a({id:"search_"+g,search:"\n      `aws-cloudwatch-rds(("+this.accountToken+"), "+this.regionToken+')`\n      metric_dimensions="DBInstanceIdentifier=['+g+']"\n      ('+f+")\n      | fields metric_name Average\n      | dedup metric_name\n      | head "+p.length+"\n      | rename Average as value\n      ",earliest_time:"0",latest_time:"now",auto_cancel:90,preview:!1},{tokens:!0}),m=A.data("results",{output_mode:"json"}),v=this.$el[g]=t("<div />"),_=e.bind(function(){this.stopListening(A),this.stopListening(m)},this);e({start:function(){d("Loading... Please wait")},cancel:function(){d("Data loading was cancelled")},fail:function(){d("Data loading failed")},error:function(e){d("Data loading error: "+e)},done:function(e){e.content.resultCount<1&&(d("No results found"),_())}}).each(function(e,t){this.listenTo(A,"search:"+t,e)},this),e({error:function(){d("Data loading error")},data:function(){h(),_()}}).each(function(e,t){this.listenTo(m,t,e)},this)}var p=["CPUUtilization","FreeableMemory","FreeStorageSpace","ReadIOPS","ReadLatency","ReadThroughput","WriteIOPS","WriteLatency","WriteThroughput"],h=e.template('\n    <dl>\n    <dd><h3 style="color:black;"><%= caption %></h3></dd>\n    <dt>\n    <table style="width:100%">\n      <% _(data).each(function(row) { %>\n      <tr>\n        <% _(row).each(function(cell) { %>\n        <td style="width=<%= cellWidth %>">\n          <span><strong><%= cell.label %>:</strong></span>\n          <span><%= cell.value %></span>\n        </td>\n        <% }) %>\n      </tr>\n      <% }) %>\n    </table>\n    </dt>\n  ');return i.BaseRowExpansionRenderer.extend({initialize:function(e){e=e||{},this.accountToken=e.accountToken,this.regionToken=e.regionToken,this.setupFn={},this.$el={}},canRender:function(){return!0},setup:function(t,n){var a=this._instanceId(n);e.isUndefined(this.setupFn[a])&&(this.setupFn[a]=e.once(d)),this.setupFn[a].apply(this,arguments)},render:function(e,t){this.$el[this._instanceId(t)].appendTo(e)},_instanceId:function(e){return e.values[e.fields.indexOf("DB Instance")]}})}.apply(t,a),!(void 0!==i&&(e.exports=i))},function(e,t,n){var a=n(153);"string"==typeof a&&(a=[[e.id,a,""]]);n(25)(a,{});a.locals&&(e.exports=a.locals)},function(e,t,n){t=e.exports=n(24)(),t.push([e.id,"#table_rds_instance_details img.rds_logo,.select2-result-label img.rds_logo,.select2-search-choice img.rds_logo{width:27px;height:20px;padding-right:5px}","",{version:3,sources:["/./package/appserver/static/pcss/pages/rds/bootstrap.pcss"],names:[],mappings:"AAAA,gHAGC,WAAY,AACX,YAAa,AACd,iBAAmB,CACnB",file:"bootstrap.pcss",sourcesContent:["#table_rds_instance_details img.rds_logo,\n.select2-search-choice img.rds_logo,\n.select2-result-label img.rds_logo {\n\twidth: 27px;\n  height: 20px;\n\tpadding-right: 5px;\n}\n"],sourceRoot:"webpack://"}])}])});